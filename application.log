2024-05-06 18:34:35,278 - INFO - DatabaseManager initialized
2024-05-06 18:34:35,278 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-05-06 18:34:35,293 - DEBUG - load_verify_locations cafile='C:\\Users\\dored\\anaconda3\\Library\\ssl\\cacert.pem'
2024-05-06 18:34:35,680 - INFO - AiTextProcessor initialized with OpenAI embedding model: text-embedding-3-large
2024-05-06 18:34:35,680 - INFO - ArticleProcessor initialized with AI summary model: gemini-1.0-pro-001
2024-05-06 18:34:35,680 - INFO - Application initialized with API keys.
2024-05-06 18:34:38,221 - INFO - Executed query: SELECT id,image FROM merged_articles WHERE s3_image IS NULL AND image IS NOT NULL
2024-05-06 18:34:38,221 - INFO - Getting articles with null s3_image: 27
2024-05-06 18:34:40,050 - INFO - Processing article with id: 144
2024-05-06 18:34:44,263 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:34:45,056 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/rafahgaza_autoOrient_i.jpg HTTP/1.1" 200 85909
2024-05-06 18:34:48,759 - DEBUG - Loading s3:Bucket
2024-05-06 18:34:48,759 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:34:48,763 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:34:48,763 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:34:48,764 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:34:48,765 - DEBUG - Acquiring 0
2024-05-06 18:34:48,772 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9190990>}) about to wait for the following futures []
2024-05-06 18:34:48,772 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9190990>}) done waiting for dependent futures
2024-05-06 18:34:48,772 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9190990>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E9183610>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9183890>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7E9183F90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9190990>}
2024-05-06 18:34:48,772 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AtxviHyI.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7E9183F90> for transfer request: 0.
2024-05-06 18:34:48,772 - DEBUG - Acquiring 0
2024-05-06 18:34:48,779 - DEBUG - Releasing acquire 0/None
2024-05-06 18:34:48,779 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AtxviHyI.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:34:48,779 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AtxviHyI.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:34:48,779 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AtxviHyI.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7E91A8C10>, 'bucket': 'briefly-articles-images', 'key': 'AtxviHyI.jpg', 'extra_args': {}}
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:34:48,783 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:34:48,783 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:34:48,783 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:34:48,787 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'us-east-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'AtxviHyI.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:34:48,792 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.amazonaws.com
2024-05-06 18:34:48,792 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:34:48,792 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:34:48,792 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:34:48,808 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:34:48,808 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:34:48,808 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:34:48,808 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:34:48,808 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:34:48,808 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/AtxviHyI.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'n8A6s0bLfADe4UvGHfBjOw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E91A8C10>, 'auth_path': '/briefly-articles-images/AtxviHyI.jpg', 'url': 'https://briefly-articles-images.s3.amazonaws.com/AtxviHyI.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'AtxviHyI.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E91A8C10>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'AtxviHyI.jpg'}, 'signing': {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'us-east-1'}]}}}
2024-05-06 18:34:48,808 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:34:48,808 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:34:48,808 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:34:48,808 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:34:48,808 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:34:48,808 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:34:48,808 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:34:48,808 - DEBUG - CanonicalRequest:
PUT
/AtxviHyI.jpg

content-md5:n8A6s0bLfADe4UvGHfBjOw==
host:briefly-articles-images.s3.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153448Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:34:48,808 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153448Z
20240506/us-east-1/s3/aws4_request
c05851bdcb515fd0653bc657566ed807d91ff2b0f5ee2faeb65b1f7732da73b7
2024-05-06 18:34:48,808 - DEBUG - Signature:
04d9943a6fbc613fb191940072e69b0f8c5f6d044d7c3ae9965611b228fc1d49
2024-05-06 18:34:48,808 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:34:48,808 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:34:48,808 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.amazonaws.com/AtxviHyI.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'n8A6s0bLfADe4UvGHfBjOw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153448Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=04d9943a6fbc613fb191940072e69b0f8c5f6d044d7c3ae9965611b228fc1d49', 'amz-sdk-invocation-id': b'd597ba53-27c5-4054-92c0-89c07dce3b0e', 'amz-sdk-request': b'attempt=1', 'Content-Length': '85513'}>
2024-05-06 18:34:48,816 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:34:48,817 - DEBUG - Starting new HTTPS connection (1): briefly-articles-images.s3.amazonaws.com:443
2024-05-06 18:34:49,645 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:34:49,913 - DEBUG - Received a non 100 Continue response from the server, NOT sending request body.
2024-05-06 18:34:49,915 - DEBUG - https://briefly-articles-images.s3.amazonaws.com:443 "PUT /AtxviHyI.jpg HTTP/1.1" 400 None
2024-05-06 18:34:49,917 - DEBUG - Response headers: {'x-amz-request-id': 'KD1YT75M8YQ6TG3W', 'x-amz-id-2': '/pM+1hpJYvdNPJNFkcIFVqB00R0XNkfmmSDzJ4GhjCeg6nenw7ZsIIFznWOzjesIPFgBrn76SS8=', 'Content-Type': 'application/xml', 'Transfer-Encoding': 'chunked', 'Date': 'Mon, 06 May 2024 15:34:49 GMT', 'Server': 'AmazonS3', 'Connection': 'close'}
2024-05-06 18:34:49,917 - DEBUG - Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'eu-north-1\'</Message><Region>eu-north-1</Region><RequestId>KD1YT75M8YQ6TG3W</RequestId><HostId>/pM+1hpJYvdNPJNFkcIFVqB00R0XNkfmmSDzJ4GhjCeg6nenw7ZsIIFznWOzjesIPFgBrn76SS8=</HostId></Error>'
2024-05-06 18:34:49,930 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:34:49,931 - DEBUG - No retry needed.
2024-05-06 18:34:49,931 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:34:49,932 - DEBUG - S3 client configured for region us-east-1 but the bucket briefly-articles-images is in region eu-north-1; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts.
2024-05-06 18:34:49,932 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:34:49,932 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:34:49,932 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'AtxviHyI.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:34:49,934 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:34:49,935 - DEBUG - Updating URI from https://briefly-articles-images.s3.amazonaws.com/AtxviHyI.jpg to https://briefly-articles-images.s3.eu-north-1.amazonaws.com/AtxviHyI.jpg
2024-05-06 18:34:49,936 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:34:49,936 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:34:49,937 - DEBUG - Response received to retry, sleeping for 0 seconds
2024-05-06 18:34:49,951 - DEBUG - Rewinding stream: <s3transfer.utils.ReadFileChunk object at 0x000002B7E91A8C10>
2024-05-06 18:34:49,952 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:34:49,952 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:34:49,952 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:34:49,952 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:34:49,952 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:34:49,954 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:34:49,955 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:34:49,955 - DEBUG - CanonicalRequest:
PUT
/AtxviHyI.jpg

content-md5:n8A6s0bLfADe4UvGHfBjOw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153449Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:34:49,955 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153449Z
20240506/eu-north-1/s3/aws4_request
d30f9e9a40ecae227ae62368501d698ac3a702c384be48cd399daf944ca2623b
2024-05-06 18:34:49,956 - DEBUG - Signature:
cb22321e9975a57d650a8031c28861106a56fbeed93b3b946d1471e54f60fec6
2024-05-06 18:34:49,956 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:34:49,957 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:34:49,958 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/AtxviHyI.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'n8A6s0bLfADe4UvGHfBjOw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153449Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=cb22321e9975a57d650a8031c28861106a56fbeed93b3b946d1471e54f60fec6', 'amz-sdk-invocation-id': b'd597ba53-27c5-4054-92c0-89c07dce3b0e', 'amz-sdk-request': b'ttl=20240506T153549Z; attempt=2; max=5', 'Content-Length': '85513'}>
2024-05-06 18:34:49,959 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:34:49,960 - DEBUG - Starting new HTTPS connection (1): briefly-articles-images.s3.eu-north-1.amazonaws.com:443
2024-05-06 18:34:50,709 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:34:50,834 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:34:51,170 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /AtxviHyI.jpg HTTP/1.1" 200 0
2024-05-06 18:34:51,170 - DEBUG - Response headers: {'x-amz-id-2': '06IpnSJCzqpnoanquMV8kNPj/CpM0DbDJ//SUHKVION/huHd8H6VyOECrRvr0qwTYnrE6lvd8d8=', 'x-amz-request-id': 'F6BRW4K0MN4X7CYT', 'Date': 'Mon, 06 May 2024 15:34:51 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"9fc03ab346cb7c00dee14bc61df0633b"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:34:51,170 - DEBUG - Response body:
b''
2024-05-06 18:34:51,170 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:34:51,170 - DEBUG - No retry needed.
2024-05-06 18:34:51,170 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:34:51,170 - DEBUG - S3 request was previously redirected, not redirecting.
2024-05-06 18:34:51,170 - DEBUG - Releasing acquire 0/None
2024-05-06 18:34:52,828 - INFO - https://img.mako.co.il/2024/05/06/rafahgaza_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/AtxviHyI.jpg
2024-05-06 18:35:01,503 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/AtxviHyI.jpg' WHERE id = 144
2024-05-06 18:35:02,893 - INFO - Updated article 144 with s3_image url: https://drwx9nycxbcad.cloudfront.net/AtxviHyI.jpg
2024-05-06 18:35:06,620 - INFO - Processing article with id: 145
2024-05-06 18:35:06,628 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:07,273 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/rkHcjXLzR/rkHcjXLzR_0_74_2980_1677_0_x-large.jpg HTTP/1.1" 200 27492
2024-05-06 18:35:07,274 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:07,274 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:07,274 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:07,274 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:07,274 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:07,274 - DEBUG - Acquiring 0
2024-05-06 18:35:07,286 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9178350>}) about to wait for the following futures []
2024-05-06 18:35:07,286 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9178350>}) done waiting for dependent futures
2024-05-06 18:35:07,286 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9178350>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E912DA10>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EE9288D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7E9183CD0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9178350>}
2024-05-06 18:35:07,286 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MDWcVbzz.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7E9183CD0> for transfer request: 0.
2024-05-06 18:35:07,286 - DEBUG - Acquiring 0
2024-05-06 18:35:07,293 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:07,293 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MDWcVbzz.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:07,293 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MDWcVbzz.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:07,293 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MDWcVbzz.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7E91781D0>, 'bucket': 'briefly-articles-images', 'key': 'MDWcVbzz.jpg', 'extra_args': {}}
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:07,293 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:07,293 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:07,293 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:07,293 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'MDWcVbzz.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:07,293 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:07,293 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:07,293 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:07,293 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:07,310 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:07,310 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:07,310 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:07,318 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:07,318 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:07,318 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/MDWcVbzz.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': '7j//jZbunBeS1JTvZh/+xw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E91781D0>, 'auth_path': '/briefly-articles-images/MDWcVbzz.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/MDWcVbzz.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'MDWcVbzz.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E91781D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'MDWcVbzz.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:07,318 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:07,318 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:07,318 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:07,318 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:07,318 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:07,318 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:07,318 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:07,318 - DEBUG - CanonicalRequest:
PUT
/MDWcVbzz.jpg

content-md5:7j//jZbunBeS1JTvZh/+xw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153507Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:07,318 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153507Z
20240506/eu-north-1/s3/aws4_request
3ae9b152f8522b8b3dbd6093ecc5389f5ec281e3ceff49b0139cedd346976ad4
2024-05-06 18:35:07,318 - DEBUG - Signature:
ba1d0fcdc5dc59e9b60d8631a46309cb5f5b7596b1b1f5f03a1199f876448df3
2024-05-06 18:35:07,318 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:07,318 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:07,318 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/MDWcVbzz.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'7j//jZbunBeS1JTvZh/+xw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153507Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=ba1d0fcdc5dc59e9b60d8631a46309cb5f5b7596b1b1f5f03a1199f876448df3', 'amz-sdk-invocation-id': b'24649ffe-f9d6-461f-bee2-8be330ca6cdd', 'amz-sdk-request': b'attempt=1', 'Content-Length': '27492'}>
2024-05-06 18:35:07,318 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:07,326 - DEBUG - Resetting dropped connection: briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:08,226 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:08,361 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:08,603 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /MDWcVbzz.jpg HTTP/1.1" 200 0
2024-05-06 18:35:08,605 - DEBUG - Response headers: {'x-amz-id-2': 'ORkbExzjDXBT0Lqo57/q/EFauFmPP4lILzMD2wH0ZAwXRlR+3i/noWoSpQpqn1SwYaRCt/+LykF1B34GaJ6TJFg/5n3/ie6C', 'x-amz-request-id': 'A2RMJ1DV94666M4H', 'Date': 'Mon, 06 May 2024 15:35:09 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"ee3fff8d96ee9c1792d494ef661ffec7"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:08,605 - DEBUG - Response body:
b''
2024-05-06 18:35:08,605 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:08,605 - DEBUG - No retry needed.
2024-05-06 18:35:08,605 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:08,605 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:08,608 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/rkHcjXLzR/rkHcjXLzR_0_74_2980_1677_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/MDWcVbzz.jpg
2024-05-06 18:35:08,778 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/MDWcVbzz.jpg' WHERE id = 145
2024-05-06 18:35:08,857 - INFO - Updated article 145 with s3_image url: https://drwx9nycxbcad.cloudfront.net/MDWcVbzz.jpg
2024-05-06 18:35:08,873 - INFO - Processing article with id: 146
2024-05-06 18:35:08,881 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:09,432 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2023/09/07/B1edMvFvAn/B1edMvFvAn_0_0_1000_563_0_x-large.jpg HTTP/1.1" 200 54224
2024-05-06 18:35:09,443 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:09,443 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:09,444 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:09,444 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:09,444 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:09,444 - DEBUG - Acquiring 0
2024-05-06 18:35:09,448 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB13C90>}) about to wait for the following futures []
2024-05-06 18:35:09,448 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB13C90>}) done waiting for dependent futures
2024-05-06 18:35:09,448 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB13C90>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E9135990>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9135E10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7E917B210>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB13C90>}
2024-05-06 18:35:09,448 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'GnYKO8Zq.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7E917B210> for transfer request: 0.
2024-05-06 18:35:09,448 - DEBUG - Acquiring 0
2024-05-06 18:35:09,457 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:09,458 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'GnYKO8Zq.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:09,459 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'GnYKO8Zq.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:09,459 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'GnYKO8Zq.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB11D50>, 'bucket': 'briefly-articles-images', 'key': 'GnYKO8Zq.jpg', 'extra_args': {}}
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:09,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:09,459 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:09,459 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:09,459 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'GnYKO8Zq.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:09,464 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:09,464 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:09,464 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:09,464 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:09,477 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:09,477 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:09,477 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:09,477 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:09,477 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:09,477 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/GnYKO8Zq.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'q3zL1K1PGvoxdoTeFBn2Rg==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB11D50>, 'auth_path': '/briefly-articles-images/GnYKO8Zq.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/GnYKO8Zq.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'GnYKO8Zq.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB11D50>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'GnYKO8Zq.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:09,477 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:09,477 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:09,480 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:09,480 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:09,480 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:09,480 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:09,480 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:09,480 - DEBUG - CanonicalRequest:
PUT
/GnYKO8Zq.jpg

content-md5:q3zL1K1PGvoxdoTeFBn2Rg==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153509Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:09,480 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153509Z
20240506/eu-north-1/s3/aws4_request
ecd87ebb2ad5343cf3af2c2a38c13a487611c0fb1e25af09f4d630c23d025e5e
2024-05-06 18:35:09,480 - DEBUG - Signature:
81a78a04b3d01bfae6191e3d8421261d3054b0b39d5425239fe2ba34b6cf844d
2024-05-06 18:35:09,480 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:09,480 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:09,480 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/GnYKO8Zq.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'q3zL1K1PGvoxdoTeFBn2Rg==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153509Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=81a78a04b3d01bfae6191e3d8421261d3054b0b39d5425239fe2ba34b6cf844d', 'amz-sdk-invocation-id': b'05d7d4d7-24e5-4097-ba50-4dec5acbda06', 'amz-sdk-request': b'attempt=1', 'Content-Length': '54224'}>
2024-05-06 18:35:09,480 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:09,480 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:09,599 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:09,827 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /GnYKO8Zq.jpg HTTP/1.1" 200 0
2024-05-06 18:35:09,827 - DEBUG - Response headers: {'x-amz-id-2': 'okLvc1rmp9jP59youYn+LDAdO2D3Zpzm1T3LO1UwzyIoxNqtggutLn/NXB2ovDqK5Sd+jCqDklQ+U/Vmfba6sGMfYrzGAoOm', 'x-amz-request-id': 'PW0TFQX153F5T6N3', 'Date': 'Mon, 06 May 2024 15:35:10 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"ab7ccbd4ad4f1afa317684de1419f646"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:09,827 - DEBUG - Response body:
b''
2024-05-06 18:35:09,827 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:09,827 - DEBUG - No retry needed.
2024-05-06 18:35:09,827 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:09,827 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:09,834 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2023/09/07/B1edMvFvAn/B1edMvFvAn_0_0_1000_563_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/GnYKO8Zq.jpg
2024-05-06 18:35:10,005 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/GnYKO8Zq.jpg' WHERE id = 146
2024-05-06 18:35:10,089 - INFO - Updated article 146 with s3_image url: https://drwx9nycxbcad.cloudfront.net/GnYKO8Zq.jpg
2024-05-06 18:35:10,089 - INFO - Processing article with id: 147
2024-05-06 18:35:10,093 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:10,861 - DEBUG - https://img.mako.co.il:443 "GET /2024/04/30/DSC00132_autoOrient_i.jpg HTTP/1.1" 200 51094
2024-05-06 18:35:11,003 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:11,005 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:11,008 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:11,008 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:11,008 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:11,010 - DEBUG - Acquiring 0
2024-05-06 18:35:11,023 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB162D0>}) about to wait for the following futures []
2024-05-06 18:35:11,023 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB162D0>}) done waiting for dependent futures
2024-05-06 18:35:11,023 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB162D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E91834D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E91A9210>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB15250>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB162D0>}
2024-05-06 18:35:11,023 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AhqQRhyV.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB15250> for transfer request: 0.
2024-05-06 18:35:11,023 - DEBUG - Acquiring 0
2024-05-06 18:35:11,028 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:11,028 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AhqQRhyV.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:11,028 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AhqQRhyV.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:11,028 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'AhqQRhyV.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB16C50>, 'bucket': 'briefly-articles-images', 'key': 'AhqQRhyV.jpg', 'extra_args': {}}
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:11,028 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:11,028 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:11,028 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:11,028 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'AhqQRhyV.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:11,035 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:11,036 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:11,036 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:11,037 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:11,051 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:11,051 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:11,051 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:11,051 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:11,051 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:11,052 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/AhqQRhyV.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'cNLQHHV1kMCGYkQ7mdGEOg==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB16C50>, 'auth_path': '/briefly-articles-images/AhqQRhyV.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/AhqQRhyV.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'AhqQRhyV.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB16C50>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'AhqQRhyV.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:11,052 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:11,052 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:11,053 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:11,053 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:11,053 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:11,054 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:11,054 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:11,054 - DEBUG - CanonicalRequest:
PUT
/AhqQRhyV.jpg

content-md5:cNLQHHV1kMCGYkQ7mdGEOg==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153511Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:11,054 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153511Z
20240506/eu-north-1/s3/aws4_request
6b99e79b19004faf35e106ee7f4d2830f765953bb974d6bdf7ee51abf6c125ee
2024-05-06 18:35:11,056 - DEBUG - Signature:
2945fda697fd23859a63c9e61b1e196b5462a4752bda0ae90d8706225bca1320
2024-05-06 18:35:11,057 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:11,057 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:11,057 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/AhqQRhyV.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'cNLQHHV1kMCGYkQ7mdGEOg==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153511Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=2945fda697fd23859a63c9e61b1e196b5462a4752bda0ae90d8706225bca1320', 'amz-sdk-invocation-id': b'068dae23-fab4-44d0-928a-ae7fc19ac740', 'amz-sdk-request': b'attempt=1', 'Content-Length': '50866'}>
2024-05-06 18:35:11,057 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:11,060 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:11,240 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:11,396 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /AhqQRhyV.jpg HTTP/1.1" 200 0
2024-05-06 18:35:11,396 - DEBUG - Response headers: {'x-amz-id-2': 'GILuISom1c1FrHtIlIc/QF28AGwAakmtHeJvbUN/NdWrh2UqaiwU/BzUckdTmCX0yup7h5fyP1GudRsstoOLDtItognilJsY', 'x-amz-request-id': 'G1N8T5962FFCBNVP', 'Date': 'Mon, 06 May 2024 15:35:12 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"70d2d01c757590c08662443b99d1843a"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:11,396 - DEBUG - Response body:
b''
2024-05-06 18:35:11,396 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:11,396 - DEBUG - No retry needed.
2024-05-06 18:35:11,396 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:11,396 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:11,407 - INFO - https://img.mako.co.il/2024/04/30/DSC00132_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/AhqQRhyV.jpg
2024-05-06 18:35:11,580 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/AhqQRhyV.jpg' WHERE id = 147
2024-05-06 18:35:11,674 - INFO - Updated article 147 with s3_image url: https://drwx9nycxbcad.cloudfront.net/AhqQRhyV.jpg
2024-05-06 18:35:11,708 - INFO - Processing article with id: 148
2024-05-06 18:35:11,715 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:12,238 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/r1Ke00DUMR/r1Ke00DUMR_0_0_611_649_0_x-large.jpg HTTP/1.1" 200 149463
2024-05-06 18:35:12,271 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:12,271 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:12,271 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:12,271 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:12,271 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:12,271 - DEBUG - Acquiring 0
2024-05-06 18:35:12,297 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17ED0>}) about to wait for the following futures []
2024-05-06 18:35:12,297 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17ED0>}) done waiting for dependent futures
2024-05-06 18:35:12,297 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17ED0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E91489D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB16390>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB17510>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17ED0>}
2024-05-06 18:35:12,297 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'NmP2PLR8.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB17510> for transfer request: 0.
2024-05-06 18:35:12,297 - DEBUG - Acquiring 0
2024-05-06 18:35:12,302 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:12,302 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'NmP2PLR8.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:12,302 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'NmP2PLR8.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:12,302 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'NmP2PLR8.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB44850>, 'bucket': 'briefly-articles-images', 'key': 'NmP2PLR8.jpg', 'extra_args': {}}
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:12,302 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:12,302 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:12,302 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:12,302 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'NmP2PLR8.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:12,302 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:12,302 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:12,302 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:12,302 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:12,319 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:12,319 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:12,319 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:12,319 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:12,319 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:12,319 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/NmP2PLR8.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'aZSJ2C6k5iVKre+jWEvZGQ==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB44850>, 'auth_path': '/briefly-articles-images/NmP2PLR8.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/NmP2PLR8.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'NmP2PLR8.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB44850>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'NmP2PLR8.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:12,319 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:12,319 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:12,319 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:12,319 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:12,319 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:12,319 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:12,319 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:12,319 - DEBUG - CanonicalRequest:
PUT
/NmP2PLR8.jpg

content-md5:aZSJ2C6k5iVKre+jWEvZGQ==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153512Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:12,319 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153512Z
20240506/eu-north-1/s3/aws4_request
41244d1fc4556a6522c889e1358a25da450b3e50f74972a625ba31eb6fcefe92
2024-05-06 18:35:12,319 - DEBUG - Signature:
1e31ed14856c6f1e56ef8b79e5fba6dc8fca77147576879e88779eae4d62f9e3
2024-05-06 18:35:12,319 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:12,319 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:12,319 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/NmP2PLR8.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'aZSJ2C6k5iVKre+jWEvZGQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153512Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=1e31ed14856c6f1e56ef8b79e5fba6dc8fca77147576879e88779eae4d62f9e3', 'amz-sdk-invocation-id': b'12e55d1e-87ba-4fe5-b340-00fb5457423a', 'amz-sdk-request': b'attempt=1', 'Content-Length': '149463'}>
2024-05-06 18:35:12,319 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:12,319 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:12,468 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:12,813 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /NmP2PLR8.jpg HTTP/1.1" 200 0
2024-05-06 18:35:12,813 - DEBUG - Response headers: {'x-amz-id-2': 'qlLZL0Hk4BdL4X5ABjxtlu3fvq8UHCXG37m9ngDh14dz8UkobaQ1nLuJtGcsdhA5eWb2yN+IeJq3+kZqCWlI88TP9idgaqL+', 'x-amz-request-id': '9FXPWMPWPD8WH8BD', 'Date': 'Mon, 06 May 2024 15:35:13 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"699489d82ea4e6254aadefa3584bd919"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:12,813 - DEBUG - Response body:
b''
2024-05-06 18:35:12,813 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:12,813 - DEBUG - No retry needed.
2024-05-06 18:35:12,813 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:12,813 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:12,858 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/r1Ke00DUMR/r1Ke00DUMR_0_0_611_649_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/NmP2PLR8.jpg
2024-05-06 18:35:13,043 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/NmP2PLR8.jpg' WHERE id = 148
2024-05-06 18:35:13,133 - INFO - Updated article 148 with s3_image url: https://drwx9nycxbcad.cloudfront.net/NmP2PLR8.jpg
2024-05-06 18:35:13,133 - INFO - Processing article with id: 149
2024-05-06 18:35:13,133 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:13,870 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1387418_C.jpg HTTP/1.1" 200 27306
2024-05-06 18:35:13,970 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:13,970 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:13,970 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:13,970 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:13,970 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:13,970 - DEBUG - Acquiring 0
2024-05-06 18:35:13,985 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB102D0>}) about to wait for the following futures []
2024-05-06 18:35:13,985 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB102D0>}) done waiting for dependent futures
2024-05-06 18:35:13,985 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB102D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB13D50>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB11690>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB109D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB102D0>}
2024-05-06 18:35:13,985 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'TL1AjVpC.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB109D0> for transfer request: 0.
2024-05-06 18:35:13,985 - DEBUG - Acquiring 0
2024-05-06 18:35:13,985 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:13,985 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'TL1AjVpC.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:13,985 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'TL1AjVpC.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:13,985 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'TL1AjVpC.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB12C10>, 'bucket': 'briefly-articles-images', 'key': 'TL1AjVpC.jpg', 'extra_args': {}}
2024-05-06 18:35:13,985 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:13,985 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:13,985 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:13,985 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:13,985 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:13,985 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:14,001 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:14,001 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:14,001 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:14,001 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:14,001 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'TL1AjVpC.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:14,145 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:14,145 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:14,145 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:14,145 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:14,172 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:14,173 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:14,173 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:14,175 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:14,175 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:14,175 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/TL1AjVpC.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'O15zRgMp4+PeZSlIGx2bVw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB12C10>, 'auth_path': '/briefly-articles-images/TL1AjVpC.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/TL1AjVpC.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'TL1AjVpC.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB12C10>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'TL1AjVpC.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:14,175 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:14,178 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:14,178 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:14,178 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:14,178 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:14,178 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:14,178 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:14,178 - DEBUG - CanonicalRequest:
PUT
/TL1AjVpC.jpg

content-md5:O15zRgMp4+PeZSlIGx2bVw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153514Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:14,178 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153514Z
20240506/eu-north-1/s3/aws4_request
eead38358f27bab083e49994c84662716bccbf242c4022c62ab7231814cfad79
2024-05-06 18:35:14,178 - DEBUG - Signature:
8e383e7df04232e1a56395e4f68f1a1ff93b304dcf2a52102c2345109f8f8e1a
2024-05-06 18:35:14,178 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:14,178 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:14,178 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/TL1AjVpC.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'O15zRgMp4+PeZSlIGx2bVw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153514Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=8e383e7df04232e1a56395e4f68f1a1ff93b304dcf2a52102c2345109f8f8e1a', 'amz-sdk-invocation-id': b'aa12cc6c-21d6-46d7-b234-8a2cd8ae8c05', 'amz-sdk-request': b'attempt=1', 'Content-Length': '27296'}>
2024-05-06 18:35:14,178 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:14,188 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:14,284 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:14,419 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /TL1AjVpC.jpg HTTP/1.1" 200 0
2024-05-06 18:35:14,430 - DEBUG - Response headers: {'x-amz-id-2': 'AYpwOp5doMHVD5I3mBKmtmK0oiZZAkaSfnVp8jxYI4/x/IpRqz1p75vjalD+lx7BzElLG2XSlHmA8LxTnUbt8z8hfYPgCR1M', 'x-amz-request-id': '8WHR1K3NWNNB8W04', 'Date': 'Mon, 06 May 2024 15:35:15 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"3b5e73460329e3e3de6529481b1d9b57"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:14,430 - DEBUG - Response body:
b''
2024-05-06 18:35:14,430 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:14,430 - DEBUG - No retry needed.
2024-05-06 18:35:14,430 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:14,430 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:14,437 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1387418_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/TL1AjVpC.jpg
2024-05-06 18:35:14,602 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/TL1AjVpC.jpg' WHERE id = 149
2024-05-06 18:35:14,689 - INFO - Updated article 149 with s3_image url: https://drwx9nycxbcad.cloudfront.net/TL1AjVpC.jpg
2024-05-06 18:35:14,689 - INFO - Processing article with id: 150
2024-05-06 18:35:14,705 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:15,359 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/dgfhasdkgajkdf_re_autoOrient_i.jpg HTTP/1.1" 200 60559
2024-05-06 18:35:15,501 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:15,501 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:15,501 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:15,501 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:15,501 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:15,501 - DEBUG - Acquiring 0
2024-05-06 18:35:15,554 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17890>}) about to wait for the following futures []
2024-05-06 18:35:15,554 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17890>}) done waiting for dependent futures
2024-05-06 18:35:15,554 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17890>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E9148B50>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9148750>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFAF0B10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17890>}
2024-05-06 18:35:15,554 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'a0sfHwWi.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFAF0B10> for transfer request: 0.
2024-05-06 18:35:15,554 - DEBUG - Acquiring 0
2024-05-06 18:35:15,554 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:15,554 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'a0sfHwWi.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:15,554 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'a0sfHwWi.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:15,554 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'a0sfHwWi.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB14150>, 'bucket': 'briefly-articles-images', 'key': 'a0sfHwWi.jpg', 'extra_args': {}}
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:15,554 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:15,554 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:15,554 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:15,554 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'a0sfHwWi.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:15,563 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:15,563 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:15,563 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:15,563 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:15,563 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:15,563 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:15,563 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:15,563 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:15,563 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:15,563 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/a0sfHwWi.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'V7WiGcyqDRSm5mdiMts9ug==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB14150>, 'auth_path': '/briefly-articles-images/a0sfHwWi.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/a0sfHwWi.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'a0sfHwWi.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB14150>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'a0sfHwWi.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:15,563 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:15,563 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:15,563 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:15,563 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:15,563 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:15,563 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:15,563 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:15,563 - DEBUG - CanonicalRequest:
PUT
/a0sfHwWi.jpg

content-md5:V7WiGcyqDRSm5mdiMts9ug==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153515Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:15,563 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153515Z
20240506/eu-north-1/s3/aws4_request
2aa55c17faca3d82de1c160d5922a44e75ad97612a1f13dc569e109735cb50ee
2024-05-06 18:35:15,563 - DEBUG - Signature:
2a837d8a5d31956869481e27bdcd8010606b2d3b27b63dc50769254d3af796b7
2024-05-06 18:35:15,563 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:15,563 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:15,579 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/a0sfHwWi.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'V7WiGcyqDRSm5mdiMts9ug==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153515Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=2a837d8a5d31956869481e27bdcd8010606b2d3b27b63dc50769254d3af796b7', 'amz-sdk-invocation-id': b'e77c4683-1947-4446-a632-0f6f7c755fb1', 'amz-sdk-request': b'attempt=1', 'Content-Length': '60288'}>
2024-05-06 18:35:15,579 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:15,579 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:15,681 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:15,848 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /a0sfHwWi.jpg HTTP/1.1" 200 0
2024-05-06 18:35:15,848 - DEBUG - Response headers: {'x-amz-id-2': 'PIRng3w0O1TuX+rYaeABH7pUfL0kzePQ8qFlhYlv5hqaAqgshRuvJ0OekkWf/fCNMAfz0C3W+9n2RNOgA2dCrgTsdJCDK48l', 'x-amz-request-id': 'HKJXN6534N90BE9N', 'Date': 'Mon, 06 May 2024 15:35:16 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"57b5a219ccaa0d14a6e6676232db3dba"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:15,848 - DEBUG - Response body:
b''
2024-05-06 18:35:15,848 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:15,848 - DEBUG - No retry needed.
2024-05-06 18:35:15,848 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:15,848 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:15,881 - INFO - https://img.mako.co.il/2024/05/06/dgfhasdkgajkdf_re_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/a0sfHwWi.jpg
2024-05-06 18:35:16,056 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/a0sfHwWi.jpg' WHERE id = 150
2024-05-06 18:35:16,149 - INFO - Updated article 150 with s3_image url: https://drwx9nycxbcad.cloudfront.net/a0sfHwWi.jpg
2024-05-06 18:35:16,149 - INFO - Processing article with id: 151
2024-05-06 18:35:16,154 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:16,887 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/dfhjkasdhjklfhajklsdhfl_re_autoOrient_i.jpg HTTP/1.1" 200 79833
2024-05-06 18:35:17,076 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:17,076 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:17,076 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:17,076 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:17,076 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:17,076 - DEBUG - Acquiring 0
2024-05-06 18:35:17,090 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9181410>}) about to wait for the following futures []
2024-05-06 18:35:17,090 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9181410>}) done waiting for dependent futures
2024-05-06 18:35:17,090 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9181410>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E9154B10>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9156990>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7E9157010>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9181410>}
2024-05-06 18:35:17,091 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'mbQSWe_D.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7E9157010> for transfer request: 0.
2024-05-06 18:35:17,091 - DEBUG - Acquiring 0
2024-05-06 18:35:17,096 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:17,097 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'mbQSWe_D.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:17,097 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'mbQSWe_D.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:17,098 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'mbQSWe_D.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7E9180350>, 'bucket': 'briefly-articles-images', 'key': 'mbQSWe_D.jpg', 'extra_args': {}}
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:17,098 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:17,098 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:17,098 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:17,098 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'mbQSWe_D.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:17,101 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:17,101 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:17,101 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:17,101 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:17,114 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:17,114 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:17,114 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:17,114 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:17,114 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:17,115 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/mbQSWe_D.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'BoaYYkdiBzoAz7IHMKVaWw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E9180350>, 'auth_path': '/briefly-articles-images/mbQSWe_D.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/mbQSWe_D.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'mbQSWe_D.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E9180350>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'mbQSWe_D.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:17,116 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:17,116 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:17,116 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:17,116 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:17,117 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:17,117 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:17,117 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:17,117 - DEBUG - CanonicalRequest:
PUT
/mbQSWe_D.jpg

content-md5:BoaYYkdiBzoAz7IHMKVaWw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153517Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:17,117 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153517Z
20240506/eu-north-1/s3/aws4_request
bef1e3b13b97e403cfc99d925d88a51638f88537a9e23dbbcee178ef1d650b25
2024-05-06 18:35:17,117 - DEBUG - Signature:
3fd5df0a2b6c0defbad564650c6fe2790c4adfcf1e1bf9c4c673bbe1d60e7407
2024-05-06 18:35:17,117 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:17,119 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:17,119 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/mbQSWe_D.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'BoaYYkdiBzoAz7IHMKVaWw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153517Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=3fd5df0a2b6c0defbad564650c6fe2790c4adfcf1e1bf9c4c673bbe1d60e7407', 'amz-sdk-invocation-id': b'9002bb60-1ae3-4cbd-8f66-d3bd5b677a2c', 'amz-sdk-request': b'attempt=1', 'Content-Length': '79468'}>
2024-05-06 18:35:17,119 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:17,119 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:17,224 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:17,454 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /mbQSWe_D.jpg HTTP/1.1" 200 0
2024-05-06 18:35:17,454 - DEBUG - Response headers: {'x-amz-id-2': 'Nbyc6MvfUFlH3sXt1ZArEZDip9yxKkgKkaqEYnX4/vw1J+D9DV12TVgtavlbNKhfjbmM89nX9OA6UPR5Bg87fTsBsf7GE0LP', 'x-amz-request-id': 'FJW4BX500KT1KDRA', 'Date': 'Mon, 06 May 2024 15:35:18 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"068698624762073a00cfb20730a55a5b"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:17,454 - DEBUG - Response body:
b''
2024-05-06 18:35:17,454 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:17,454 - DEBUG - No retry needed.
2024-05-06 18:35:17,454 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:17,470 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:17,472 - INFO - https://img.mako.co.il/2024/05/06/dfhjkasdhjklfhajklsdhfl_re_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/mbQSWe_D.jpg
2024-05-06 18:35:17,646 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/mbQSWe_D.jpg' WHERE id = 151
2024-05-06 18:35:17,728 - INFO - Updated article 151 with s3_image url: https://drwx9nycxbcad.cloudfront.net/mbQSWe_D.jpg
2024-05-06 18:35:17,735 - INFO - Processing article with id: 152
2024-05-06 18:35:17,738 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:18,459 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389457_C.jpg HTTP/1.1" 200 23317
2024-05-06 18:35:18,529 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:18,529 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:18,529 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:18,529 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:18,529 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:18,529 - DEBUG - Acquiring 0
2024-05-06 18:35:18,553 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB446D0>}) about to wait for the following futures []
2024-05-06 18:35:18,553 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB446D0>}) done waiting for dependent futures
2024-05-06 18:35:18,553 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB446D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E9192390>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9180F50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB44890>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB446D0>}
2024-05-06 18:35:18,553 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'd4jIfhG1.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB44890> for transfer request: 0.
2024-05-06 18:35:18,553 - DEBUG - Acquiring 0
2024-05-06 18:35:18,553 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:18,562 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'd4jIfhG1.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:18,562 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'd4jIfhG1.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:18,562 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'd4jIfhG1.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB45810>, 'bucket': 'briefly-articles-images', 'key': 'd4jIfhG1.jpg', 'extra_args': {}}
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:18,562 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:18,562 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:18,562 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:18,562 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'd4jIfhG1.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:18,562 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:18,562 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:18,562 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:18,562 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:18,577 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:18,577 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:18,577 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:18,577 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:18,577 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:18,577 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/d4jIfhG1.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'dInJxiN8+YTFbbFafq+h2g==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB45810>, 'auth_path': '/briefly-articles-images/d4jIfhG1.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/d4jIfhG1.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'd4jIfhG1.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB45810>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'd4jIfhG1.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:18,577 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:18,577 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:18,577 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:18,577 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:18,577 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:18,577 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:18,577 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:18,577 - DEBUG - CanonicalRequest:
PUT
/d4jIfhG1.jpg

content-md5:dInJxiN8+YTFbbFafq+h2g==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153518Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:18,577 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153518Z
20240506/eu-north-1/s3/aws4_request
f94936f20c3b34e886d28d9a63af5d2e4058faa37437c68834c3a3671462a994
2024-05-06 18:35:18,577 - DEBUG - Signature:
8a17cb4bd52a4f2873cde66231d0adf680742d61e5f860d90420bb5538802aab
2024-05-06 18:35:18,577 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:18,577 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:18,577 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/d4jIfhG1.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'dInJxiN8+YTFbbFafq+h2g==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153518Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=8a17cb4bd52a4f2873cde66231d0adf680742d61e5f860d90420bb5538802aab', 'amz-sdk-invocation-id': b'2e398c0a-1242-4361-89c5-8e2809811f26', 'amz-sdk-request': b'attempt=1', 'Content-Length': '23330'}>
2024-05-06 18:35:18,577 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:18,577 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:18,679 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:18,818 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /d4jIfhG1.jpg HTTP/1.1" 200 0
2024-05-06 18:35:18,818 - DEBUG - Response headers: {'x-amz-id-2': 'VOgcaSz2khk7Vl9yco7mn7HZ0KmG/jBORgDyc4S3Ewnty2dWphoa5JFhveeLO5k9YamV/N4Rxmt492a7zdgG5KLnttH+Cdmc', 'x-amz-request-id': '08W9C9139QWC6H1C', 'Date': 'Mon, 06 May 2024 15:35:19 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"7489c9c6237cf984c56db15a7eafa1da"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:18,818 - DEBUG - Response body:
b''
2024-05-06 18:35:18,822 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:18,822 - DEBUG - No retry needed.
2024-05-06 18:35:18,822 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:18,822 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:18,828 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389457_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/d4jIfhG1.jpg
2024-05-06 18:35:18,993 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/d4jIfhG1.jpg' WHERE id = 152
2024-05-06 18:35:19,097 - INFO - Updated article 152 with s3_image url: https://drwx9nycxbcad.cloudfront.net/d4jIfhG1.jpg
2024-05-06 18:35:19,097 - INFO - Processing article with id: 153
2024-05-06 18:35:19,105 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:19,822 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/gfhasdgdfjkasdf_autoOrient_i.jpg HTTP/1.1" 200 37319
2024-05-06 18:35:19,963 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:19,963 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:19,963 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:19,963 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:19,963 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:19,963 - DEBUG - Acquiring 0
2024-05-06 18:35:19,978 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D390>}) about to wait for the following futures []
2024-05-06 18:35:19,978 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D390>}) done waiting for dependent futures
2024-05-06 18:35:19,978 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D390>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB13F50>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E913B5D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB5C950>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D390>}
2024-05-06 18:35:19,978 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YOeWQ9Vg.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB5C950> for transfer request: 0.
2024-05-06 18:35:19,978 - DEBUG - Acquiring 0
2024-05-06 18:35:19,978 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:19,978 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YOeWQ9Vg.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:19,978 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YOeWQ9Vg.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:19,978 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YOeWQ9Vg.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB5DD10>, 'bucket': 'briefly-articles-images', 'key': 'YOeWQ9Vg.jpg', 'extra_args': {}}
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:19,978 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:19,993 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:19,993 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:19,993 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:19,993 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'YOeWQ9Vg.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:19,994 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:19,994 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:19,994 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:19,994 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:19,994 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:19,994 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:19,994 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:19,994 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:19,994 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:19,994 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/YOeWQ9Vg.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': '3kegdwKEQd1+nocEZ87SLA==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB5DD10>, 'auth_path': '/briefly-articles-images/YOeWQ9Vg.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/YOeWQ9Vg.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'YOeWQ9Vg.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB5DD10>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'YOeWQ9Vg.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:19,994 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:19,994 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:19,994 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:19,994 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:19,994 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:19,994 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:19,994 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:19,994 - DEBUG - CanonicalRequest:
PUT
/YOeWQ9Vg.jpg

content-md5:3kegdwKEQd1+nocEZ87SLA==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153519Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:19,994 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153519Z
20240506/eu-north-1/s3/aws4_request
e9fb8958361e7e5743b9b1a3192cbd985ed19e9e402ab20a8693809a6b3d3a92
2024-05-06 18:35:19,994 - DEBUG - Signature:
4b9593efd06256466267fdc9a7f4d5f2585382b409e7c583cb313cbb42bb918b
2024-05-06 18:35:20,010 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:20,010 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:20,010 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/YOeWQ9Vg.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'3kegdwKEQd1+nocEZ87SLA==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153519Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=4b9593efd06256466267fdc9a7f4d5f2585382b409e7c583cb313cbb42bb918b', 'amz-sdk-invocation-id': b'758a95d4-1a9d-4148-b213-45fba0d5cbd7', 'amz-sdk-request': b'attempt=1', 'Content-Length': '37517'}>
2024-05-06 18:35:20,010 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:20,010 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:20,152 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:20,302 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /YOeWQ9Vg.jpg HTTP/1.1" 200 0
2024-05-06 18:35:20,302 - DEBUG - Response headers: {'x-amz-id-2': '9zAEn4RHM7wJLdyJzfvEuujZwEzr6pnUdEn07ybYDu/nKE+bBM4NwBPMb2eEirCJS1T6v/gg8g8VaNTDsDz5x683GNx7CNjY', 'x-amz-request-id': 'SQMENDA6PEF9K6ZF', 'Date': 'Mon, 06 May 2024 15:35:21 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"de47a077028441dd7e9e870467ced22c"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:20,302 - DEBUG - Response body:
b''
2024-05-06 18:35:20,302 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:20,302 - DEBUG - No retry needed.
2024-05-06 18:35:20,302 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:20,302 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:20,302 - INFO - https://img.mako.co.il/2024/05/06/gfhasdgdfjkasdf_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/YOeWQ9Vg.jpg
2024-05-06 18:35:20,504 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/YOeWQ9Vg.jpg' WHERE id = 153
2024-05-06 18:35:20,601 - INFO - Updated article 153 with s3_image url: https://drwx9nycxbcad.cloudfront.net/YOeWQ9Vg.jpg
2024-05-06 18:35:20,603 - INFO - Processing article with id: 154
2024-05-06 18:35:20,611 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:21,156 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2023/09/20/BkSfU11vuJp/BkSfU11vuJp_0_0_1000_563_0_x-large.jpg HTTP/1.1" 200 16310
2024-05-06 18:35:21,160 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:21,160 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:21,160 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:21,160 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:21,160 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:21,160 - DEBUG - Acquiring 0
2024-05-06 18:35:21,165 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB69710>}) about to wait for the following futures []
2024-05-06 18:35:21,165 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB69710>}) done waiting for dependent futures
2024-05-06 18:35:21,165 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB69710>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB68A10>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB5DC10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB689D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB69710>}
2024-05-06 18:35:21,171 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'VtANCpb5.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB689D0> for transfer request: 0.
2024-05-06 18:35:21,171 - DEBUG - Acquiring 0
2024-05-06 18:35:21,172 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:21,181 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'VtANCpb5.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:21,181 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'VtANCpb5.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:21,181 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'VtANCpb5.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB69FD0>, 'bucket': 'briefly-articles-images', 'key': 'VtANCpb5.jpg', 'extra_args': {}}
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:21,181 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:21,181 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:21,181 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:21,181 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'VtANCpb5.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:21,181 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:21,181 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:21,181 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:21,181 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:21,197 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:21,197 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:21,197 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:21,197 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:21,197 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:21,197 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/VtANCpb5.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'zJJF3U/L2SYTH7bBVSdD7g==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB69FD0>, 'auth_path': '/briefly-articles-images/VtANCpb5.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/VtANCpb5.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'VtANCpb5.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB69FD0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'VtANCpb5.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:21,197 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:21,197 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:21,197 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:21,197 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:21,197 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:21,197 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:21,205 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:21,205 - DEBUG - CanonicalRequest:
PUT
/VtANCpb5.jpg

content-md5:zJJF3U/L2SYTH7bBVSdD7g==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153521Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:21,205 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153521Z
20240506/eu-north-1/s3/aws4_request
88c0372e47f6960b09dd1decaad0a93a56d04d45c88c239afe7a7f4c0b11c5a6
2024-05-06 18:35:21,205 - DEBUG - Signature:
c1df8ff55b2375b2210c20080f785aafc289eafb06b47e09dcee8062dff3fade
2024-05-06 18:35:21,205 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:21,205 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:21,205 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/VtANCpb5.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'zJJF3U/L2SYTH7bBVSdD7g==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153521Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=c1df8ff55b2375b2210c20080f785aafc289eafb06b47e09dcee8062dff3fade', 'amz-sdk-invocation-id': b'61aac8ed-7992-4161-8fb0-531114dcee7c', 'amz-sdk-request': b'attempt=1', 'Content-Length': '16310'}>
2024-05-06 18:35:21,205 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:21,205 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:21,304 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:21,438 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /VtANCpb5.jpg HTTP/1.1" 200 0
2024-05-06 18:35:21,438 - DEBUG - Response headers: {'x-amz-id-2': 'SUx0ifH5svVNzYlgDKkT4Pp9l2N+DcUwK0EmstrZwISYHT5lNWz8Cxh+0Mn8QjPn59WCmsDWOmW07Gc/houlS0v51z94Om4e', 'x-amz-request-id': 'Q0YRQARYNZSG873V', 'Date': 'Mon, 06 May 2024 15:35:22 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"cc9245dd4fcbd926131fb6c1552743ee"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:21,438 - DEBUG - Response body:
b''
2024-05-06 18:35:21,438 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:21,438 - DEBUG - No retry needed.
2024-05-06 18:35:21,438 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:21,438 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:21,449 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2023/09/20/BkSfU11vuJp/BkSfU11vuJp_0_0_1000_563_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/VtANCpb5.jpg
2024-05-06 18:35:21,626 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/VtANCpb5.jpg' WHERE id = 154
2024-05-06 18:35:21,710 - INFO - Updated article 154 with s3_image url: https://drwx9nycxbcad.cloudfront.net/VtANCpb5.jpg
2024-05-06 18:35:21,711 - INFO - Processing article with id: 155
2024-05-06 18:35:21,719 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:22,312 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/rkZryTx8GR/rkZryTx8GR_0_0_3000_1688_0_x-large.jpg HTTP/1.1" 200 22847
2024-05-06 18:35:22,312 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:22,312 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:22,319 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:22,319 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:22,319 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:22,322 - DEBUG - Acquiring 0
2024-05-06 18:35:22,328 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB81E10>}) about to wait for the following futures []
2024-05-06 18:35:22,328 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB81E10>}) done waiting for dependent futures
2024-05-06 18:35:22,328 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB81E10>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB80D50>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB81150>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB811D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB81E10>}
2024-05-06 18:35:22,328 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'lvl5rOiq.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB811D0> for transfer request: 0.
2024-05-06 18:35:22,328 - DEBUG - Acquiring 0
2024-05-06 18:35:22,328 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:22,328 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'lvl5rOiq.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:22,328 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'lvl5rOiq.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:22,328 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'lvl5rOiq.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB827D0>, 'bucket': 'briefly-articles-images', 'key': 'lvl5rOiq.jpg', 'extra_args': {}}
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:22,328 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:22,328 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:22,328 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:22,336 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'lvl5rOiq.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:22,336 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:22,336 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:22,336 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:22,336 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:22,343 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:22,343 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:22,343 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:22,343 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:22,343 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:22,343 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/lvl5rOiq.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'oa2xktnXz9f3j6IBRCH/FQ==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB827D0>, 'auth_path': '/briefly-articles-images/lvl5rOiq.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/lvl5rOiq.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'lvl5rOiq.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB827D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'lvl5rOiq.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:22,343 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:22,343 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:22,343 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:22,343 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:22,343 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:22,343 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:22,343 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:22,343 - DEBUG - CanonicalRequest:
PUT
/lvl5rOiq.jpg

content-md5:oa2xktnXz9f3j6IBRCH/FQ==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153522Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:22,351 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153522Z
20240506/eu-north-1/s3/aws4_request
3c7c51593f68cfcf2d33dacfa2e688f8b35acad0cf13498b389b6746dde6060f
2024-05-06 18:35:22,351 - DEBUG - Signature:
9365d164d8f26d4f24f7707a5bb9ecab22cdb0e5157f354a41cacebf59b8ca30
2024-05-06 18:35:22,351 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:22,351 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:22,351 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/lvl5rOiq.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'oa2xktnXz9f3j6IBRCH/FQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153522Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=9365d164d8f26d4f24f7707a5bb9ecab22cdb0e5157f354a41cacebf59b8ca30', 'amz-sdk-invocation-id': b'b14c126b-baaf-4be1-8d2c-fb4983904635', 'amz-sdk-request': b'attempt=1', 'Content-Length': '22847'}>
2024-05-06 18:35:22,351 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:22,351 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:22,457 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:22,588 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /lvl5rOiq.jpg HTTP/1.1" 200 0
2024-05-06 18:35:22,588 - DEBUG - Response headers: {'x-amz-id-2': 'BEyOrqdAXD56OLnpkzTl+4etEGOYtGCjTGQwYchrYv4P6THREfF0v4oVs0O4ZGTs0SLRoQZRCKM318NO2hGwm1zXf7WcPD99', 'x-amz-request-id': '54XMDDJ7XKX8AT6E', 'Date': 'Mon, 06 May 2024 15:35:23 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"a1adb192d9d7cfd7f78fa2014421ff15"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:22,588 - DEBUG - Response body:
b''
2024-05-06 18:35:22,588 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:22,588 - DEBUG - No retry needed.
2024-05-06 18:35:22,588 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:22,588 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:22,595 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/rkZryTx8GR/rkZryTx8GR_0_0_3000_1688_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/lvl5rOiq.jpg
2024-05-06 18:35:22,772 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/lvl5rOiq.jpg' WHERE id = 155
2024-05-06 18:35:22,863 - INFO - Updated article 155 with s3_image url: https://drwx9nycxbcad.cloudfront.net/lvl5rOiq.jpg
2024-05-06 18:35:22,864 - INFO - Processing article with id: 156
2024-05-06 18:35:22,872 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:23,587 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389512_C.jpg HTTP/1.1" 200 24855
2024-05-06 18:35:23,686 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:23,686 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:23,688 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:23,688 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:23,688 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:23,688 - DEBUG - Acquiring 0
2024-05-06 18:35:23,694 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E490>}) about to wait for the following futures []
2024-05-06 18:35:23,694 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E490>}) done waiting for dependent futures
2024-05-06 18:35:23,694 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E490>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB8D510>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB8D750>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB8D690>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E490>}
2024-05-06 18:35:23,694 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'bvsVfYtt.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB8D690> for transfer request: 0.
2024-05-06 18:35:23,694 - DEBUG - Acquiring 0
2024-05-06 18:35:23,702 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:23,702 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'bvsVfYtt.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:23,704 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'bvsVfYtt.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:23,704 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'bvsVfYtt.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB8EE10>, 'bucket': 'briefly-articles-images', 'key': 'bvsVfYtt.jpg', 'extra_args': {}}
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:23,704 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:23,704 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:23,704 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:23,704 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'bvsVfYtt.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:23,708 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:23,710 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:23,710 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:23,710 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:23,721 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:23,721 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:23,724 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:23,725 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:23,725 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:23,725 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/bvsVfYtt.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'nn/V3/nSjsEsK3jU1X5DyA==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB8EE10>, 'auth_path': '/briefly-articles-images/bvsVfYtt.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/bvsVfYtt.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'bvsVfYtt.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB8EE10>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'bvsVfYtt.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:23,725 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:23,725 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:23,725 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:23,725 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:23,725 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:23,727 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:23,727 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:23,727 - DEBUG - CanonicalRequest:
PUT
/bvsVfYtt.jpg

content-md5:nn/V3/nSjsEsK3jU1X5DyA==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153523Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:23,727 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153523Z
20240506/eu-north-1/s3/aws4_request
71be505d2a363e3992bff7b20334fdad6c4960a6ff805b8882e22411920599cf
2024-05-06 18:35:23,727 - DEBUG - Signature:
c5c91ac30e456c9d0878a00033dd588fecc927aef45419e0211c8b6c9dc578f2
2024-05-06 18:35:23,727 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:23,727 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:23,727 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/bvsVfYtt.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'nn/V3/nSjsEsK3jU1X5DyA==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153523Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=c5c91ac30e456c9d0878a00033dd588fecc927aef45419e0211c8b6c9dc578f2', 'amz-sdk-invocation-id': b'72c43bee-f538-4c39-9f12-5c8c7d388e69', 'amz-sdk-request': b'attempt=1', 'Content-Length': '24859'}>
2024-05-06 18:35:23,727 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:23,732 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:23,940 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:24,082 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /bvsVfYtt.jpg HTTP/1.1" 200 0
2024-05-06 18:35:24,082 - DEBUG - Response headers: {'x-amz-id-2': 'g0ELUrs9eDRgfC0vIEsvQ6xkBPZGBbwq1xZZ9iEfm6Th9iApzXQ/+5KuwvfvzVZfrKhwBJQUvO4gyWSGiwzAndICE4BcaUL6', 'x-amz-request-id': 'F9E6SA689GZTVYE0', 'Date': 'Mon, 06 May 2024 15:35:24 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"9e7fd5dff9d28ec12c2b78d4d57e43c8"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:24,082 - DEBUG - Response body:
b''
2024-05-06 18:35:24,084 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:24,084 - DEBUG - No retry needed.
2024-05-06 18:35:24,084 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:24,084 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:24,086 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389512_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/bvsVfYtt.jpg
2024-05-06 18:35:24,255 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/bvsVfYtt.jpg' WHERE id = 156
2024-05-06 18:35:24,345 - INFO - Updated article 156 with s3_image url: https://drwx9nycxbcad.cloudfront.net/bvsVfYtt.jpg
2024-05-06 18:35:24,352 - INFO - Processing article with id: 157
2024-05-06 18:35:24,355 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:25,085 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/05/living_050524_bighSKA_13_autoOrient_w.jpg HTTP/1.1" 200 339552
2024-05-06 18:35:25,444 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:25,444 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:25,448 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:25,448 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:25,448 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:25,450 - DEBUG - Acquiring 0
2024-05-06 18:35:25,450 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBA28D0>}) about to wait for the following futures []
2024-05-06 18:35:25,450 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBA28D0>}) done waiting for dependent futures
2024-05-06 18:35:25,450 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBA28D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFBA1AD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBA1C10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBA1C90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBA28D0>}
2024-05-06 18:35:25,456 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9CWJBmr.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBA1C90> for transfer request: 0.
2024-05-06 18:35:25,456 - DEBUG - Acquiring 0
2024-05-06 18:35:25,459 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:25,459 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9CWJBmr.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:25,459 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9CWJBmr.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:25,459 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9CWJBmr.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBA3250>, 'bucket': 'briefly-articles-images', 'key': 'q9CWJBmr.jpg', 'extra_args': {}}
2024-05-06 18:35:25,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:25,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:25,459 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:25,464 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:25,464 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:25,464 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:25,464 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:25,464 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:25,464 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:25,464 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:25,464 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'q9CWJBmr.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:25,464 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:25,464 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:25,464 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:25,464 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:25,480 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:25,480 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:25,480 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:25,480 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:25,480 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:25,480 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/q9CWJBmr.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'RrExrccC18xOLEcLx3cfww==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBA3250>, 'auth_path': '/briefly-articles-images/q9CWJBmr.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/q9CWJBmr.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'q9CWJBmr.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBA3250>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'q9CWJBmr.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:25,480 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:25,480 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:25,480 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:25,480 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:25,480 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:25,480 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:25,480 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:25,480 - DEBUG - CanonicalRequest:
PUT
/q9CWJBmr.jpg

content-md5:RrExrccC18xOLEcLx3cfww==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153525Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:25,480 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153525Z
20240506/eu-north-1/s3/aws4_request
a2e4b99650790daf7a23e7ffa2671bc8bbcd9324d8d6a1f39ff953f8826a6068
2024-05-06 18:35:25,480 - DEBUG - Signature:
305b13f1f4eea1754fa36a4a1862a51390fe7dad4c0bafe6697a5b05068fb6c5
2024-05-06 18:35:25,480 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:25,480 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:25,488 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/q9CWJBmr.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'RrExrccC18xOLEcLx3cfww==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153525Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=305b13f1f4eea1754fa36a4a1862a51390fe7dad4c0bafe6697a5b05068fb6c5', 'amz-sdk-invocation-id': b'a4998c3d-1f60-4ea9-bc69-0ac88c6cacec', 'amz-sdk-request': b'attempt=1', 'Content-Length': '337933'}>
2024-05-06 18:35:25,488 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:25,488 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:25,682 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:26,330 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /q9CWJBmr.jpg HTTP/1.1" 200 0
2024-05-06 18:35:26,331 - DEBUG - Response headers: {'x-amz-id-2': 'vqeudtyAUAWvhEzLV4+Vq4ktG0ioeDzZn9EBeKSC/tZpG1EKzcORm+CoQGDiS+lSRBluufxnmRb6Rhsb0oskwdWlNAvhKfXu', 'x-amz-request-id': 'ME5KHK8F1W61DSJX', 'Date': 'Mon, 06 May 2024 15:35:26 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"46b131adc702d7cc4e2c470bc7771fc3"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:26,331 - DEBUG - Response body:
b''
2024-05-06 18:35:26,332 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:26,332 - DEBUG - No retry needed.
2024-05-06 18:35:26,332 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:26,332 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:26,335 - INFO - https://img.mako.co.il/2024/05/05/living_050524_bighSKA_13_autoOrient_w.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/q9CWJBmr.jpg
2024-05-06 18:35:26,599 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/q9CWJBmr.jpg' WHERE id = 157
2024-05-06 18:35:26,795 - INFO - Updated article 157 with s3_image url: https://drwx9nycxbcad.cloudfront.net/q9CWJBmr.jpg
2024-05-06 18:35:26,795 - INFO - Processing article with id: 158
2024-05-06 18:35:26,811 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:27,496 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389445_C.jpg HTTP/1.1" 200 20199
2024-05-06 18:35:27,568 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:27,568 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:27,568 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:27,568 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:27,568 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:27,568 - DEBUG - Acquiring 0
2024-05-06 18:35:27,580 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAEB90>}) about to wait for the following futures []
2024-05-06 18:35:27,580 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAEB90>}) done waiting for dependent futures
2024-05-06 18:35:27,580 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAEB90>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFBADDD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBADF10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBAD990>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAEB90>}
2024-05-06 18:35:27,582 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'OFaUNN-2.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBAD990> for transfer request: 0.
2024-05-06 18:35:27,582 - DEBUG - Acquiring 0
2024-05-06 18:35:27,584 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:27,584 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'OFaUNN-2.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:27,584 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'OFaUNN-2.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:27,584 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'OFaUNN-2.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBAF510>, 'bucket': 'briefly-articles-images', 'key': 'OFaUNN-2.jpg', 'extra_args': {}}
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:27,584 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:27,584 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:27,584 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:27,584 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'OFaUNN-2.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:27,591 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:27,591 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:27,591 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:27,591 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:27,600 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:27,600 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:27,600 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:27,600 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:27,600 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:27,600 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/OFaUNN-2.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'fvz55YELN4kAWxMHt2Y0Ow==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBAF510>, 'auth_path': '/briefly-articles-images/OFaUNN-2.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/OFaUNN-2.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'OFaUNN-2.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBAF510>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'OFaUNN-2.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:27,600 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:27,600 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:27,600 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:27,600 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:27,600 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:27,600 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:27,600 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:27,600 - DEBUG - CanonicalRequest:
PUT
/OFaUNN-2.jpg

content-md5:fvz55YELN4kAWxMHt2Y0Ow==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153527Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:27,600 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153527Z
20240506/eu-north-1/s3/aws4_request
6465a2fd55d66c3edc515358a29d36fce830fc7e488125b7fd7e41065b07a7c9
2024-05-06 18:35:27,600 - DEBUG - Signature:
7cbc4c6a9deba4847e609e60e1277ca8d3abe6f3d1ae7333c722a40867f456b5
2024-05-06 18:35:27,600 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:27,600 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:27,600 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/OFaUNN-2.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'fvz55YELN4kAWxMHt2Y0Ow==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153527Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=7cbc4c6a9deba4847e609e60e1277ca8d3abe6f3d1ae7333c722a40867f456b5', 'amz-sdk-invocation-id': b'da9e4f52-459d-41fb-ac50-dfecdaf71e78', 'amz-sdk-request': b'attempt=1', 'Content-Length': '20228'}>
2024-05-06 18:35:27,600 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:27,600 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:27,709 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:27,832 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /OFaUNN-2.jpg HTTP/1.1" 200 0
2024-05-06 18:35:27,832 - DEBUG - Response headers: {'x-amz-id-2': '8cU+RkyP0wNss0x/CvGLe+2I+sbitIBwG8rrVt9vDl0fS66ruFQPiCU8XOrYqt0KCs0WknalR6syZdjso10C/dwnAJMMTFM6', 'x-amz-request-id': 'PMZQJKATYTKED9DM', 'Date': 'Mon, 06 May 2024 15:35:28 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"7efcf9e5810b3789005b1307b766343b"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:27,832 - DEBUG - Response body:
b''
2024-05-06 18:35:27,832 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:27,832 - DEBUG - No retry needed.
2024-05-06 18:35:27,832 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:27,832 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:27,848 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389445_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/OFaUNN-2.jpg
2024-05-06 18:35:28,018 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/OFaUNN-2.jpg' WHERE id = 158
2024-05-06 18:35:28,099 - INFO - Updated article 158 with s3_image url: https://drwx9nycxbcad.cloudfront.net/OFaUNN-2.jpg
2024-05-06 18:35:28,099 - INFO - Processing article with id: 159
2024-05-06 18:35:28,115 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:28,951 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/SkQZHmUM0/SkQZHmUM0_1_0_650_366_0_x-large.jpg HTTP/1.1" 200 27657
2024-05-06 18:35:28,951 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:28,951 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:28,966 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:28,966 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:28,966 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:28,966 - DEBUG - Acquiring 0
2024-05-06 18:35:28,966 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBEFD0>}) about to wait for the following futures []
2024-05-06 18:35:28,966 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBEFD0>}) done waiting for dependent futures
2024-05-06 18:35:28,966 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBEFD0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFBBE210>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBBE310>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBBE390>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBEFD0>}
2024-05-06 18:35:28,966 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jlqII_HM.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBBE390> for transfer request: 0.
2024-05-06 18:35:28,982 - DEBUG - Acquiring 0
2024-05-06 18:35:29,030 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:29,030 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jlqII_HM.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:29,030 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jlqII_HM.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:29,030 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jlqII_HM.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBBF950>, 'bucket': 'briefly-articles-images', 'key': 'jlqII_HM.jpg', 'extra_args': {}}
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:29,030 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:29,030 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:29,045 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:29,045 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'jlqII_HM.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:29,045 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:29,045 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:29,045 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:29,045 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:29,045 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:29,045 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:29,045 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:29,045 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:29,045 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:29,061 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/jlqII_HM.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'tfoLOQ0WZ8k0i45LAnj4Gg==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBBF950>, 'auth_path': '/briefly-articles-images/jlqII_HM.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/jlqII_HM.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'jlqII_HM.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBBF950>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'jlqII_HM.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:29,061 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:29,061 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:29,061 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:29,061 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:29,061 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:29,061 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:29,061 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:29,061 - DEBUG - CanonicalRequest:
PUT
/jlqII_HM.jpg

content-md5:tfoLOQ0WZ8k0i45LAnj4Gg==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153529Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:29,061 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153529Z
20240506/eu-north-1/s3/aws4_request
b98d6e779eb92b4f2789f6ffd34fd9e9ca01b272b36340d1f9c3fbbb68c25f44
2024-05-06 18:35:29,061 - DEBUG - Signature:
53b5ba4793c7f5fdb12aa4367d88419843ae02cb1b38f6b953b284718d8f1f31
2024-05-06 18:35:29,061 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:29,061 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:29,061 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/jlqII_HM.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'tfoLOQ0WZ8k0i45LAnj4Gg==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153529Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=53b5ba4793c7f5fdb12aa4367d88419843ae02cb1b38f6b953b284718d8f1f31', 'amz-sdk-invocation-id': b'c199f5aa-58b5-480b-9592-de7571dbb747', 'amz-sdk-request': b'attempt=1', 'Content-Length': '27657'}>
2024-05-06 18:35:29,061 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:29,061 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:29,259 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:29,380 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /jlqII_HM.jpg HTTP/1.1" 200 0
2024-05-06 18:35:29,394 - DEBUG - Response headers: {'x-amz-id-2': 'gP+ESmVIexFYd7FfVZ1op8VSzK+Gsa2Ixe0Ylf18pOWlM+CKD+nYFK4c5Zdo29DhMdIZ0xxosvXnBhpJhltMLeYTPRUF5TxY', 'x-amz-request-id': '0NSYN41R6NX2AE4G', 'Date': 'Mon, 06 May 2024 15:35:30 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"b5fa0b390d1667c9348b8e4b0278f81a"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:29,394 - DEBUG - Response body:
b''
2024-05-06 18:35:29,394 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:29,394 - DEBUG - No retry needed.
2024-05-06 18:35:29,394 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:29,394 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:29,403 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/SkQZHmUM0/SkQZHmUM0_1_0_650_366_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/jlqII_HM.jpg
2024-05-06 18:35:29,588 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/jlqII_HM.jpg' WHERE id = 159
2024-05-06 18:35:29,677 - INFO - Updated article 159 with s3_image url: https://drwx9nycxbcad.cloudfront.net/jlqII_HM.jpg
2024-05-06 18:35:29,679 - INFO - Processing article with id: 160
2024-05-06 18:35:29,685 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:30,404 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/michael11_autoOrient_i.jpg HTTP/1.1" 200 59274
2024-05-06 18:35:30,545 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:30,545 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:30,545 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:30,545 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:30,545 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:30,545 - DEBUG - Acquiring 0
2024-05-06 18:35:30,580 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBCB6D0>}) about to wait for the following futures []
2024-05-06 18:35:30,580 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBCB6D0>}) done waiting for dependent futures
2024-05-06 18:35:30,580 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBCB6D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB68ED0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBCA990>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBCA8D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBCB6D0>}
2024-05-06 18:35:30,580 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'iwr_vPkJ.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBCA8D0> for transfer request: 0.
2024-05-06 18:35:30,580 - DEBUG - Acquiring 0
2024-05-06 18:35:30,593 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:30,594 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'iwr_vPkJ.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:30,594 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'iwr_vPkJ.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:30,594 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'iwr_vPkJ.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7F0BB0090>, 'bucket': 'briefly-articles-images', 'key': 'iwr_vPkJ.jpg', 'extra_args': {}}
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:30,594 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:30,594 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:30,594 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:30,594 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'iwr_vPkJ.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:30,600 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:30,600 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:30,600 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:30,600 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:30,608 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:30,608 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:30,608 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:30,608 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:30,608 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:30,608 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/iwr_vPkJ.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': '2CkpPrW7RgMuVFcXenpvzA==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7F0BB0090>, 'auth_path': '/briefly-articles-images/iwr_vPkJ.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/iwr_vPkJ.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'iwr_vPkJ.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7F0BB0090>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'iwr_vPkJ.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:30,608 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:30,616 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:30,616 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:30,616 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:30,616 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:30,616 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:30,617 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:30,617 - DEBUG - CanonicalRequest:
PUT
/iwr_vPkJ.jpg

content-md5:2CkpPrW7RgMuVFcXenpvzA==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153530Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:30,617 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153530Z
20240506/eu-north-1/s3/aws4_request
2ecd5d709ffbc24fafc28565471d7c385a2430d8334f4d8cad2d659105e95a10
2024-05-06 18:35:30,617 - DEBUG - Signature:
523eabfa940ad7282fb9064cff54194d09304d4b62c5526f488d003ed8d564cf
2024-05-06 18:35:30,617 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:30,617 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:30,617 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/iwr_vPkJ.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'2CkpPrW7RgMuVFcXenpvzA==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153530Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=523eabfa940ad7282fb9064cff54194d09304d4b62c5526f488d003ed8d564cf', 'amz-sdk-invocation-id': b'2985b2d5-7fd1-4abc-851b-672745c6644a', 'amz-sdk-request': b'attempt=1', 'Content-Length': '59007'}>
2024-05-06 18:35:30,617 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:30,624 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:30,801 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:30,966 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /iwr_vPkJ.jpg HTTP/1.1" 200 0
2024-05-06 18:35:30,966 - DEBUG - Response headers: {'x-amz-id-2': 'YDUdmxTGl8FlhaP/K6LnJeB1pyTD/MVY0tcgvn0w33LX5jTgQ6gylYjPvvSsaK5iQr5mH0xK3DrWTPUJFEq80HZA/cj+N+nH', 'x-amz-request-id': 'ZJK4KN40F62HCAJV', 'Date': 'Mon, 06 May 2024 15:35:31 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"d829293eb5bb46032e5457177a7a6fcc"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:30,966 - DEBUG - Response body:
b''
2024-05-06 18:35:30,973 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:30,973 - DEBUG - No retry needed.
2024-05-06 18:35:30,973 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:30,973 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:30,973 - INFO - https://img.mako.co.il/2024/05/06/michael11_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/iwr_vPkJ.jpg
2024-05-06 18:35:31,148 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/iwr_vPkJ.jpg' WHERE id = 160
2024-05-06 18:35:31,232 - INFO - Updated article 160 with s3_image url: https://drwx9nycxbcad.cloudfront.net/iwr_vPkJ.jpg
2024-05-06 18:35:31,232 - INFO - Processing article with id: 161
2024-05-06 18:35:31,246 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:32,031 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389377_C.jpg HTTP/1.1" 200 31918
2024-05-06 18:35:32,136 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:32,143 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:32,145 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:32,145 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:32,145 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:32,148 - DEBUG - Acquiring 0
2024-05-06 18:35:32,150 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7F0BB3950>}) about to wait for the following futures []
2024-05-06 18:35:32,150 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7F0BB3950>}) done waiting for dependent futures
2024-05-06 18:35:32,150 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7F0BB3950>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7F0BB2BD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7F0BB2710>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7F0BB2B90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7F0BB3950>}
2024-05-06 18:35:32,150 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MLNUcinZ.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7F0BB2B90> for transfer request: 0.
2024-05-06 18:35:32,150 - DEBUG - Acquiring 0
2024-05-06 18:35:32,161 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:32,162 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MLNUcinZ.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:32,162 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MLNUcinZ.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:32,162 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MLNUcinZ.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7F0BC4310>, 'bucket': 'briefly-articles-images', 'key': 'MLNUcinZ.jpg', 'extra_args': {}}
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:32,162 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:32,165 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:32,165 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:32,165 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:32,165 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'MLNUcinZ.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:32,165 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:32,165 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:32,165 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:32,169 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:32,182 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:32,182 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:32,184 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:32,184 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:32,184 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:32,184 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/MLNUcinZ.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'jeUiH7lJl+7XtN8qAFY23w==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7F0BC4310>, 'auth_path': '/briefly-articles-images/MLNUcinZ.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/MLNUcinZ.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'MLNUcinZ.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7F0BC4310>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'MLNUcinZ.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:32,184 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:32,184 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:32,184 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:32,184 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:32,184 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:32,184 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:32,184 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:32,184 - DEBUG - CanonicalRequest:
PUT
/MLNUcinZ.jpg

content-md5:jeUiH7lJl+7XtN8qAFY23w==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153532Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:32,184 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153532Z
20240506/eu-north-1/s3/aws4_request
df8e3f7b41466ac789a2ac4e91e63482d612141cc2a182eb41bc72d9018f7300
2024-05-06 18:35:32,184 - DEBUG - Signature:
63b50c413cd89301c2158e37d170c9afe39482020206eb0c15f00abc4a3f5a4c
2024-05-06 18:35:32,184 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:32,184 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:32,184 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/MLNUcinZ.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'jeUiH7lJl+7XtN8qAFY23w==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153532Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=63b50c413cd89301c2158e37d170c9afe39482020206eb0c15f00abc4a3f5a4c', 'amz-sdk-invocation-id': b'7a353ee0-a788-4185-a2fe-3b3a59c16fd3', 'amz-sdk-request': b'attempt=1', 'Content-Length': '31890'}>
2024-05-06 18:35:32,184 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:32,184 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:32,298 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:32,414 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /MLNUcinZ.jpg HTTP/1.1" 200 0
2024-05-06 18:35:32,429 - DEBUG - Response headers: {'x-amz-id-2': 'RIY76Zv1IalLI5jHVkCgIfEEc5NywozusVenuYM75vDlIs/1OhB8cmh1C7fpPNVpas5OhuKpZg9b0btDD53xX90wf4NUPFVP', 'x-amz-request-id': 'CPTWAK2FAN5P0083', 'Date': 'Mon, 06 May 2024 15:35:33 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"8de5221fb94997eed7b4df2a005636df"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:32,429 - DEBUG - Response body:
b''
2024-05-06 18:35:32,429 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:32,429 - DEBUG - No retry needed.
2024-05-06 18:35:32,429 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:32,429 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:32,455 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389377_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/MLNUcinZ.jpg
2024-05-06 18:35:32,637 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/MLNUcinZ.jpg' WHERE id = 161
2024-05-06 18:35:32,723 - INFO - Updated article 161 with s3_image url: https://drwx9nycxbcad.cloudfront.net/MLNUcinZ.jpg
2024-05-06 18:35:32,723 - INFO - Processing article with id: 162
2024-05-06 18:35:32,723 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:33,403 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/BybMbm8f0/BybMbm8f0_0_432_720_405_0_x-large.jpg HTTP/1.1" 200 27576
2024-05-06 18:35:33,414 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:33,414 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:33,414 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:33,414 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:33,414 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:33,414 - DEBUG - Acquiring 0
2024-05-06 18:35:33,424 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBDF10>}) about to wait for the following futures []
2024-05-06 18:35:33,424 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBDF10>}) done waiting for dependent futures
2024-05-06 18:35:33,424 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBDF10>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFBBF210>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBBFF90>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBBF0D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBBDF10>}
2024-05-06 18:35:33,424 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'uuUG4eUo.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBBF0D0> for transfer request: 0.
2024-05-06 18:35:33,424 - DEBUG - Acquiring 0
2024-05-06 18:35:33,431 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:33,436 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'uuUG4eUo.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:33,436 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'uuUG4eUo.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:33,436 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'uuUG4eUo.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBBC1D0>, 'bucket': 'briefly-articles-images', 'key': 'uuUG4eUo.jpg', 'extra_args': {}}
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:33,436 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:33,436 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:33,436 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:33,436 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'uuUG4eUo.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:33,436 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:33,436 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:33,436 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:33,436 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:33,456 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:33,456 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:33,456 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:33,456 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:33,456 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:33,456 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/uuUG4eUo.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': '5O5KKmwA2EexmDvF7z6Bgw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBBC1D0>, 'auth_path': '/briefly-articles-images/uuUG4eUo.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/uuUG4eUo.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'uuUG4eUo.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBBC1D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'uuUG4eUo.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:33,456 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:33,456 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:33,456 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:33,456 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:33,456 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:33,456 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:33,456 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:33,456 - DEBUG - CanonicalRequest:
PUT
/uuUG4eUo.jpg

content-md5:5O5KKmwA2EexmDvF7z6Bgw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153533Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:33,463 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153533Z
20240506/eu-north-1/s3/aws4_request
3cea4078747eba1548c27e06569df87f15e79807bea33ab1c6d145c5ce316888
2024-05-06 18:35:33,463 - DEBUG - Signature:
d3658a479c0972e2db27874798542f1b2e7ede14c1401899b3cf2b1bd8a77227
2024-05-06 18:35:33,463 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:33,464 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:33,464 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/uuUG4eUo.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'5O5KKmwA2EexmDvF7z6Bgw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153533Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=d3658a479c0972e2db27874798542f1b2e7ede14c1401899b3cf2b1bd8a77227', 'amz-sdk-invocation-id': b'b6220491-9149-4c6b-88b4-76566c2e5a43', 'amz-sdk-request': b'attempt=1', 'Content-Length': '27576'}>
2024-05-06 18:35:33,464 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:33,464 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:33,568 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:33,698 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /uuUG4eUo.jpg HTTP/1.1" 200 0
2024-05-06 18:35:33,698 - DEBUG - Response headers: {'x-amz-id-2': 'eM7tDEMBlkf6jx+DjYZf7A0gzfgC3ddtK9ONfkg42SJfRlTMFLNxta0Gc5501VXe4XALWlewW5DGNkG8P2nfJuOBWo6uz3Wd', 'x-amz-request-id': '9XEQ1C785WH99M4N', 'Date': 'Mon, 06 May 2024 15:35:34 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"e4ee4a2a6c00d847b1983bc5ef3e8183"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:33,698 - DEBUG - Response body:
b''
2024-05-06 18:35:33,698 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:33,698 - DEBUG - No retry needed.
2024-05-06 18:35:33,698 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:33,698 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:33,711 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/BybMbm8f0/BybMbm8f0_0_432_720_405_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/uuUG4eUo.jpg
2024-05-06 18:35:33,890 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/uuUG4eUo.jpg' WHERE id = 162
2024-05-06 18:35:33,977 - INFO - Updated article 162 with s3_image url: https://drwx9nycxbcad.cloudfront.net/uuUG4eUo.jpg
2024-05-06 18:35:33,977 - INFO - Processing article with id: 163
2024-05-06 18:35:33,994 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:34,756 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389492_C.jpg HTTP/1.1" 200 47661
2024-05-06 18:35:34,915 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:34,915 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:34,915 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:34,915 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:34,915 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:34,915 - DEBUG - Acquiring 0
2024-05-06 18:35:34,928 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAF790>}) about to wait for the following futures []
2024-05-06 18:35:34,928 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAF790>}) done waiting for dependent futures
2024-05-06 18:35:34,928 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAF790>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFBAD310>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBAC790>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBAC650>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFBAF790>}
2024-05-06 18:35:34,928 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'S7vIJk4B.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBAC650> for transfer request: 0.
2024-05-06 18:35:34,928 - DEBUG - Acquiring 0
2024-05-06 18:35:34,935 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:34,935 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'S7vIJk4B.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:34,935 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'S7vIJk4B.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:34,935 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'S7vIJk4B.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBA3990>, 'bucket': 'briefly-articles-images', 'key': 'S7vIJk4B.jpg', 'extra_args': {}}
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:34,935 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:34,935 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:34,935 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:34,935 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'S7vIJk4B.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:34,935 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:34,935 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:34,935 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:34,948 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:34,950 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:34,950 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:34,950 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:34,963 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:34,963 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:34,963 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/S7vIJk4B.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': '9/en2Zvi3boT3sMcQ1+26A==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBA3990>, 'auth_path': '/briefly-articles-images/S7vIJk4B.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/S7vIJk4B.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'S7vIJk4B.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFBA3990>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'S7vIJk4B.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:34,965 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:34,965 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:34,965 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:34,965 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:34,965 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:34,965 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:34,965 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:34,965 - DEBUG - CanonicalRequest:
PUT
/S7vIJk4B.jpg

content-md5:9/en2Zvi3boT3sMcQ1+26A==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153534Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:34,965 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153534Z
20240506/eu-north-1/s3/aws4_request
480e393860b9d345aab6431677423c431da4617e089ec73931f17732efe7dcf5
2024-05-06 18:35:34,965 - DEBUG - Signature:
44c715a1d089964036a32716f909ef30c6e1894cf83c37af037db8894ce88e8f
2024-05-06 18:35:34,965 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:34,965 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:34,965 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/S7vIJk4B.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'9/en2Zvi3boT3sMcQ1+26A==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153534Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=44c715a1d089964036a32716f909ef30c6e1894cf83c37af037db8894ce88e8f', 'amz-sdk-invocation-id': b'b86e351f-3073-4981-832c-cabf23b34541', 'amz-sdk-request': b'attempt=1', 'Content-Length': '47553'}>
2024-05-06 18:35:34,965 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:34,965 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:35,073 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:35,246 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /S7vIJk4B.jpg HTTP/1.1" 200 0
2024-05-06 18:35:35,246 - DEBUG - Response headers: {'x-amz-id-2': 'lzQ4wnrB9rTiMj4Q6aU5QcwM2AoKTCm3sE2CIViFvqUXHOt3O71Iim6pPReGAXwX5J6nJ2s4tC1/drLl9R/IjpGIRrIIHrgU', 'x-amz-request-id': 'E1G99J6Y6SWKY1KA', 'Date': 'Mon, 06 May 2024 15:35:36 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"f7f7a7d99be2ddba13dec31c435fb6e8"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:35,246 - DEBUG - Response body:
b''
2024-05-06 18:35:35,246 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:35,246 - DEBUG - No retry needed.
2024-05-06 18:35:35,246 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:35,246 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:35,264 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389492_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/S7vIJk4B.jpg
2024-05-06 18:35:35,441 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/S7vIJk4B.jpg' WHERE id = 163
2024-05-06 18:35:35,531 - INFO - Updated article 163 with s3_image url: https://drwx9nycxbcad.cloudfront.net/S7vIJk4B.jpg
2024-05-06 18:35:35,531 - INFO - Processing article with id: 164
2024-05-06 18:35:35,531 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:36,256 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389496_C.jpg HTTP/1.1" 200 29688
2024-05-06 18:35:36,351 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:36,351 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:36,366 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:36,366 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:36,366 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:36,366 - DEBUG - Acquiring 0
2024-05-06 18:35:36,384 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E990>}) about to wait for the following futures []
2024-05-06 18:35:36,384 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E990>}) done waiting for dependent futures
2024-05-06 18:35:36,384 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E990>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFBA0490>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFBA1350>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBA1250>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB8E990>}
2024-05-06 18:35:36,384 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YqdR6Dna.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFBA1250> for transfer request: 0.
2024-05-06 18:35:36,384 - DEBUG - Acquiring 0
2024-05-06 18:35:36,384 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:36,384 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YqdR6Dna.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:36,384 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YqdR6Dna.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:36,384 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'YqdR6Dna.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB8F9D0>, 'bucket': 'briefly-articles-images', 'key': 'YqdR6Dna.jpg', 'extra_args': {}}
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:36,384 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:36,384 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:36,384 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:36,384 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'YqdR6Dna.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:36,384 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:36,384 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:36,384 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:36,384 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:36,399 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:36,399 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:36,399 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:36,399 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:36,399 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:36,399 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/YqdR6Dna.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'x8qk0AQqZHeD2XVS2hyRYA==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB8F9D0>, 'auth_path': '/briefly-articles-images/YqdR6Dna.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/YqdR6Dna.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'YqdR6Dna.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB8F9D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'YqdR6Dna.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:36,399 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:36,399 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:36,399 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:36,399 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:36,399 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:36,399 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:36,399 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:36,399 - DEBUG - CanonicalRequest:
PUT
/YqdR6Dna.jpg

content-md5:x8qk0AQqZHeD2XVS2hyRYA==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153536Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:36,399 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153536Z
20240506/eu-north-1/s3/aws4_request
430dd3ebe6e1388b0957eb8af1e7e2065206676fe8a77ebb33d0647a8e5c413f
2024-05-06 18:35:36,399 - DEBUG - Signature:
2c3cc25b63ca3316771f170c1a49adbcb12dcf1d7744e5966bfe8a1158356f13
2024-05-06 18:35:36,399 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:36,399 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:36,399 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/YqdR6Dna.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'x8qk0AQqZHeD2XVS2hyRYA==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153536Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=2c3cc25b63ca3316771f170c1a49adbcb12dcf1d7744e5966bfe8a1158356f13', 'amz-sdk-invocation-id': b'fef2c88b-6bde-4729-b12b-06941f154173', 'amz-sdk-request': b'attempt=1', 'Content-Length': '29743'}>
2024-05-06 18:35:36,414 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:36,414 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:36,538 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:36,679 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /YqdR6Dna.jpg HTTP/1.1" 200 0
2024-05-06 18:35:36,681 - DEBUG - Response headers: {'x-amz-id-2': 'iPyg9hO3QpeFShI6QjniYfYuT94FyLwL4pvDSMugfnXK90w7CroELjI0aMaSWS9oOefsvpE3YhEwBOzOimSC1xl+VthipXSk', 'x-amz-request-id': '0GVFDYZG6JPBHPXK', 'Date': 'Mon, 06 May 2024 15:35:37 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"c7caa4d0042a647783d97552da1c9160"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:36,681 - DEBUG - Response body:
b''
2024-05-06 18:35:36,681 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:36,681 - DEBUG - No retry needed.
2024-05-06 18:35:36,681 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:36,685 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:36,690 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389496_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/YqdR6Dna.jpg
2024-05-06 18:35:36,868 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/YqdR6Dna.jpg' WHERE id = 164
2024-05-06 18:35:36,946 - INFO - Updated article 164 with s3_image url: https://drwx9nycxbcad.cloudfront.net/YqdR6Dna.jpg
2024-05-06 18:35:36,946 - INFO - Processing article with id: 165
2024-05-06 18:35:36,962 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:37,503 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/S1EamP8fR/S1EamP8fR_0_15_1971_1109_0_x-large.jpg HTTP/1.1" 200 32830
2024-05-06 18:35:37,519 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:37,519 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:37,519 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:37,519 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:37,519 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:37,519 - DEBUG - Acquiring 0
2024-05-06 18:35:37,535 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB813D0>}) about to wait for the following futures []
2024-05-06 18:35:37,535 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB813D0>}) done waiting for dependent futures
2024-05-06 18:35:37,535 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB813D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB819D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB80190>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB81850>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB813D0>}
2024-05-06 18:35:37,535 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'G5Wh1do1.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB81850> for transfer request: 0.
2024-05-06 18:35:37,535 - DEBUG - Acquiring 0
2024-05-06 18:35:37,550 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:37,550 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'G5Wh1do1.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:37,550 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'G5Wh1do1.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:37,550 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'G5Wh1do1.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB83790>, 'bucket': 'briefly-articles-images', 'key': 'G5Wh1do1.jpg', 'extra_args': {}}
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:37,550 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:37,550 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:37,550 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:37,550 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'G5Wh1do1.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:37,550 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:37,550 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:37,550 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:37,550 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:37,572 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:37,572 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:37,573 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:37,573 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:37,573 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:37,573 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/G5Wh1do1.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'Zy728V/KphLKPoFEAlba1g==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB83790>, 'auth_path': '/briefly-articles-images/G5Wh1do1.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/G5Wh1do1.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'G5Wh1do1.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB83790>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'G5Wh1do1.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:37,574 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:37,575 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:37,575 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:37,575 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:37,575 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:37,576 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:37,576 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:37,576 - DEBUG - CanonicalRequest:
PUT
/G5Wh1do1.jpg

content-md5:Zy728V/KphLKPoFEAlba1g==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153537Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:37,576 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153537Z
20240506/eu-north-1/s3/aws4_request
94ac494c2e6f8648cd37580a7159c50361c549617dfc906e82e3785a1ed1e775
2024-05-06 18:35:37,576 - DEBUG - Signature:
a440c7cd28d2016b2883b785274c5ab1bb2c7e162f66dc8d1347afadc56e5f1f
2024-05-06 18:35:37,577 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:37,577 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:37,578 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/G5Wh1do1.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'Zy728V/KphLKPoFEAlba1g==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153537Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=a440c7cd28d2016b2883b785274c5ab1bb2c7e162f66dc8d1347afadc56e5f1f', 'amz-sdk-invocation-id': b'83c8b7d1-af25-471f-9acc-321491a1c162', 'amz-sdk-request': b'attempt=1', 'Content-Length': '32830'}>
2024-05-06 18:35:37,578 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:37,579 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:37,681 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:37,834 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /G5Wh1do1.jpg HTTP/1.1" 200 0
2024-05-06 18:35:37,834 - DEBUG - Response headers: {'x-amz-id-2': 'Y0PDvswljFGwVhVGCeij3cAOMsRDRRigjTWAEU9Jh77/LkRipegPIEZKVmj7sDEzJmRXtDy8bmZ3BFL/pMQy3aCFN3MTo9tU', 'x-amz-request-id': 'JYCRKEMY8X0329Q0', 'Date': 'Mon, 06 May 2024 15:35:38 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"672ef6f15fcaa612ca3e81440256dad6"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:37,834 - DEBUG - Response body:
b''
2024-05-06 18:35:37,834 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:37,834 - DEBUG - No retry needed.
2024-05-06 18:35:37,834 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:37,834 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:37,834 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/S1EamP8fR/S1EamP8fR_0_15_1971_1109_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/G5Wh1do1.jpg
2024-05-06 18:35:38,021 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/G5Wh1do1.jpg' WHERE id = 165
2024-05-06 18:35:38,100 - INFO - Updated article 165 with s3_image url: https://drwx9nycxbcad.cloudfront.net/G5Wh1do1.jpg
2024-05-06 18:35:38,100 - INFO - Processing article with id: 166
2024-05-06 18:35:38,118 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:38,645 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2022/02/19/ryWdZBTR15/ryWdZBTR15_0_415_3000_1688_0_x-large.jpg HTTP/1.1" 200 60440
2024-05-06 18:35:38,645 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:38,645 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:38,662 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:38,662 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:38,662 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:38,664 - DEBUG - Acquiring 0
2024-05-06 18:35:38,669 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB6BBD0>}) about to wait for the following futures []
2024-05-06 18:35:38,669 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB6BBD0>}) done waiting for dependent futures
2024-05-06 18:35:38,669 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB6BBD0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB69D50>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB6AA50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB68850>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB6BBD0>}
2024-05-06 18:35:38,669 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'RFe8D8hN.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB68850> for transfer request: 0.
2024-05-06 18:35:38,669 - DEBUG - Acquiring 0
2024-05-06 18:35:38,669 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:38,669 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'RFe8D8hN.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:38,669 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'RFe8D8hN.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:38,669 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'RFe8D8hN.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB685D0>, 'bucket': 'briefly-articles-images', 'key': 'RFe8D8hN.jpg', 'extra_args': {}}
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:38,669 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:38,669 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:38,669 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:38,669 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'RFe8D8hN.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:38,681 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:38,681 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:38,681 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:38,681 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:38,689 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:38,689 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:38,689 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:38,689 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:38,689 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:38,689 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/RFe8D8hN.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'bTo7N34Maw/Bd9SDfrGYcw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB685D0>, 'auth_path': '/briefly-articles-images/RFe8D8hN.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/RFe8D8hN.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'RFe8D8hN.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB685D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'RFe8D8hN.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:38,689 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:38,689 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:38,689 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:38,689 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:38,689 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:38,689 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:38,698 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:38,698 - DEBUG - CanonicalRequest:
PUT
/RFe8D8hN.jpg

content-md5:bTo7N34Maw/Bd9SDfrGYcw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153538Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:38,698 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153538Z
20240506/eu-north-1/s3/aws4_request
5e2dc988ad42de252c53c8033fada6977682c5673b33f6c503d6a5774978fd03
2024-05-06 18:35:38,698 - DEBUG - Signature:
37473814855481125fba680756ed94afc1341be65837cf87116924815570a42f
2024-05-06 18:35:38,698 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:38,698 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:38,698 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/RFe8D8hN.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'bTo7N34Maw/Bd9SDfrGYcw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153538Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=37473814855481125fba680756ed94afc1341be65837cf87116924815570a42f', 'amz-sdk-invocation-id': b'145b5103-4aa2-4554-af5d-4ba6682e6ae8', 'amz-sdk-request': b'attempt=1', 'Content-Length': '60440'}>
2024-05-06 18:35:38,698 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:38,698 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:38,810 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:38,968 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /RFe8D8hN.jpg HTTP/1.1" 200 0
2024-05-06 18:35:38,972 - DEBUG - Response headers: {'x-amz-id-2': 'DwhfNMHmIn0ttMHsV2CJvWpL7HvQ3bQWmykWbFoiweuMeizIJixlFjUwWRIhHW2EPABJwaj/IBZQ3kyD0tRggMwEoCZf3SrK', 'x-amz-request-id': 'P5D3GYXMJ8HY9W7B', 'Date': 'Mon, 06 May 2024 15:35:39 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"6d3a3b377e0c6b0fc177d4837eb19873"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:38,972 - DEBUG - Response body:
b''
2024-05-06 18:35:38,972 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:38,972 - DEBUG - No retry needed.
2024-05-06 18:35:38,972 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:38,972 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:38,993 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2022/02/19/ryWdZBTR15/ryWdZBTR15_0_415_3000_1688_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/RFe8D8hN.jpg
2024-05-06 18:35:39,163 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/RFe8D8hN.jpg' WHERE id = 166
2024-05-06 18:35:39,247 - INFO - Updated article 166 with s3_image url: https://drwx9nycxbcad.cloudfront.net/RFe8D8hN.jpg
2024-05-06 18:35:39,247 - INFO - Processing article with id: 167
2024-05-06 18:35:39,264 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:40,097 - DEBUG - https://img.mako.co.il:443 "GET /2024/04/30/5_autoOrient_i.jpg HTTP/1.1" 200 67122
2024-05-06 18:35:40,271 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:40,271 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:40,271 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:40,271 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:40,271 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:40,271 - DEBUG - Acquiring 0
2024-05-06 18:35:40,281 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D150>}) about to wait for the following futures []
2024-05-06 18:35:40,286 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D150>}) done waiting for dependent futures
2024-05-06 18:35:40,286 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D150>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB5F850>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7EFB5F810>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB5DC50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB5D150>}
2024-05-06 18:35:40,286 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9pYrM8X.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB5DC50> for transfer request: 0.
2024-05-06 18:35:40,286 - DEBUG - Acquiring 0
2024-05-06 18:35:40,286 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:40,286 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9pYrM8X.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:40,286 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9pYrM8X.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:40,286 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'q9pYrM8X.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7E9190310>, 'bucket': 'briefly-articles-images', 'key': 'q9pYrM8X.jpg', 'extra_args': {}}
2024-05-06 18:35:40,286 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:40,286 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:40,286 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:40,296 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:40,296 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:40,296 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:40,296 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:40,297 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:40,297 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:40,297 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:40,297 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'q9pYrM8X.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:40,297 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:40,297 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:40,304 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:40,304 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:40,318 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:40,318 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:40,318 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:40,318 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:40,318 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:40,318 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/q9pYrM8X.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': '6/QXEa12R8gL56NhI/Tyog==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E9190310>, 'auth_path': '/briefly-articles-images/q9pYrM8X.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/q9pYrM8X.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'q9pYrM8X.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7E9190310>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'q9pYrM8X.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:40,318 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:40,318 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:40,318 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:40,318 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:40,318 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:40,318 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:40,318 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:40,318 - DEBUG - CanonicalRequest:
PUT
/q9pYrM8X.jpg

content-md5:6/QXEa12R8gL56NhI/Tyog==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153540Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:40,318 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153540Z
20240506/eu-north-1/s3/aws4_request
670a976f26caa45276646c32da7b2c5a91d6194ba4c5281141e913a45b68aac0
2024-05-06 18:35:40,318 - DEBUG - Signature:
5358519774e856da308e35e6298e5754df0f4ae1cd88a3a70af8348d700f1637
2024-05-06 18:35:40,318 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:40,318 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:40,318 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/q9pYrM8X.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'6/QXEa12R8gL56NhI/Tyog==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153540Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=5358519774e856da308e35e6298e5754df0f4ae1cd88a3a70af8348d700f1637', 'amz-sdk-invocation-id': b'86270b9d-d714-4eaa-8fa9-cc6c0662124e', 'amz-sdk-request': b'attempt=1', 'Content-Length': '66849'}>
2024-05-06 18:35:40,318 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:40,328 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:40,431 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:40,687 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /q9pYrM8X.jpg HTTP/1.1" 200 0
2024-05-06 18:35:40,687 - DEBUG - Response headers: {'x-amz-id-2': '8K+b3xeJ8st++APFAq5x6hp1Bw4katWHky/uVLFOpsucBMdjM0ACM5FGLOMieE/OsQYmuIEySmN9+77tCF3sbZ0u4KO8CZRU', 'x-amz-request-id': 'ZHASXQQN0PMVXJZA', 'Date': 'Mon, 06 May 2024 15:35:41 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"ebf41711ad7647c80be7a36123f4f2a2"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:40,687 - DEBUG - Response body:
b''
2024-05-06 18:35:40,687 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:40,687 - DEBUG - No retry needed.
2024-05-06 18:35:40,687 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:40,687 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:40,687 - INFO - https://img.mako.co.il/2024/04/30/5_autoOrient_i.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/q9pYrM8X.jpg
2024-05-06 18:35:40,873 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/q9pYrM8X.jpg' WHERE id = 167
2024-05-06 18:35:40,960 - INFO - Updated article 167 with s3_image url: https://drwx9nycxbcad.cloudfront.net/q9pYrM8X.jpg
2024-05-06 18:35:40,960 - INFO - Processing article with id: 168
2024-05-06 18:35:40,960 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:41,536 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/B1P711H8fC/B1P711H8fC_300_131_775_436_0_x-large.jpg HTTP/1.1" 200 41269
2024-05-06 18:35:41,536 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:41,536 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:41,536 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:41,536 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:41,536 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:41,536 - DEBUG - Acquiring 0
2024-05-06 18:35:41,551 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB46A50>}) about to wait for the following futures []
2024-05-06 18:35:41,551 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB46A50>}) done waiting for dependent futures
2024-05-06 18:35:41,551 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB46A50>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB45450>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9178F50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB47B50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB46A50>}
2024-05-06 18:35:41,551 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MreOO6yd.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB47B50> for transfer request: 0.
2024-05-06 18:35:41,551 - DEBUG - Acquiring 0
2024-05-06 18:35:41,551 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:41,551 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MreOO6yd.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:41,551 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MreOO6yd.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:41,551 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'MreOO6yd.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB463D0>, 'bucket': 'briefly-articles-images', 'key': 'MreOO6yd.jpg', 'extra_args': {}}
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:41,551 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:41,551 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:41,551 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:41,551 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'MreOO6yd.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:41,567 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:41,567 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:41,567 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:41,567 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:41,567 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:41,567 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:41,567 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:41,567 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:41,567 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:41,567 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/MreOO6yd.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'BcR5wq35+J2/YIdJoejyKA==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB463D0>, 'auth_path': '/briefly-articles-images/MreOO6yd.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/MreOO6yd.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'MreOO6yd.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB463D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'MreOO6yd.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:41,567 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:41,583 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:41,583 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:41,583 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:41,583 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:41,583 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:41,583 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:41,583 - DEBUG - CanonicalRequest:
PUT
/MreOO6yd.jpg

content-md5:BcR5wq35+J2/YIdJoejyKA==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153541Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:41,583 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153541Z
20240506/eu-north-1/s3/aws4_request
2f4ff3db9c5b6295c7ed86ce62c4d2975af9f1fcaad00deb7736f980df9ef254
2024-05-06 18:35:41,583 - DEBUG - Signature:
84bea255488967b3c7cbfcf47f0dc853a40da62a6d0f533a278423b0653860c4
2024-05-06 18:35:41,583 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:41,583 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:41,583 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/MreOO6yd.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'BcR5wq35+J2/YIdJoejyKA==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153541Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=84bea255488967b3c7cbfcf47f0dc853a40da62a6d0f533a278423b0653860c4', 'amz-sdk-invocation-id': b'dab4291e-f123-4d8f-ad65-78f469553db0', 'amz-sdk-request': b'attempt=1', 'Content-Length': '41269'}>
2024-05-06 18:35:41,583 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:41,583 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:41,691 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:41,862 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /MreOO6yd.jpg HTTP/1.1" 200 0
2024-05-06 18:35:41,862 - DEBUG - Response headers: {'x-amz-id-2': 'oDW8ZVgykm49N7XNLFZnplAkK0BCwq/HBu8ZBJvOFxUV4LDwChVI04dP85sZS13vfemIWJUobtMmW9JVZg4xMtOcLtFALGFX', 'x-amz-request-id': 'GC13S7D95MD9Q5JB', 'Date': 'Mon, 06 May 2024 15:35:42 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"05c479c2adf9f89dbf608749a1e8f228"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:41,862 - DEBUG - Response body:
b''
2024-05-06 18:35:41,862 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:41,862 - DEBUG - No retry needed.
2024-05-06 18:35:41,862 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:41,870 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:41,871 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/B1P711H8fC/B1P711H8fC_300_131_775_436_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/MreOO6yd.jpg
2024-05-06 18:35:42,043 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/MreOO6yd.jpg' WHERE id = 168
2024-05-06 18:35:42,122 - INFO - Updated article 168 with s3_image url: https://drwx9nycxbcad.cloudfront.net/MreOO6yd.jpg
2024-05-06 18:35:42,122 - INFO - Processing article with id: 169
2024-05-06 18:35:42,137 - DEBUG - Starting new HTTPS connection (1): ynet-pic1.yit.co.il:443
2024-05-06 18:35:42,730 - DEBUG - https://ynet-pic1.yit.co.il:443 "GET /cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/HyaD004Uz0/HyaD004Uz0_0_316_961_540_0_x-large.jpg HTTP/1.1" 200 39381
2024-05-06 18:35:42,733 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:42,733 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:42,733 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:42,733 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:42,733 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:42,742 - DEBUG - Acquiring 0
2024-05-06 18:35:42,749 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9149050>}) about to wait for the following futures []
2024-05-06 18:35:42,749 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9149050>}) done waiting for dependent futures
2024-05-06 18:35:42,749 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9149050>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7EFB80F10>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E91810D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7E9181F50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7E9149050>}
2024-05-06 18:35:42,749 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jazhR4hC.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7E9181F50> for transfer request: 0.
2024-05-06 18:35:42,749 - DEBUG - Acquiring 0
2024-05-06 18:35:42,749 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:42,749 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jazhR4hC.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:42,749 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jazhR4hC.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:42,749 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': 'jazhR4hC.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB13B50>, 'bucket': 'briefly-articles-images', 'key': 'jazhR4hC.jpg', 'extra_args': {}}
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:42,749 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:42,757 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:42,757 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:42,757 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:42,757 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': 'jazhR4hC.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:42,757 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:42,757 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:42,757 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:42,757 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:42,773 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:42,773 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:42,773 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:42,773 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:42,773 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:42,773 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/jazhR4hC.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'pDFptqAkrkeohb15c8rRJw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB13B50>, 'auth_path': '/briefly-articles-images/jazhR4hC.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/jazhR4hC.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': 'jazhR4hC.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB13B50>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': 'jazhR4hC.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:42,773 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:42,773 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:42,773 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:42,773 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:42,773 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:42,773 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:42,773 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:42,773 - DEBUG - CanonicalRequest:
PUT
/jazhR4hC.jpg

content-md5:pDFptqAkrkeohb15c8rRJw==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153542Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:42,773 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153542Z
20240506/eu-north-1/s3/aws4_request
3f8f8ba6fe87cd7e0c0363a87196b3549e848e66891ea495cb20713028fc10d2
2024-05-06 18:35:42,773 - DEBUG - Signature:
d9c62efff253abe2ef5d76c0b99464218148fd0e1667de06cb7ba412b685f862
2024-05-06 18:35:42,773 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:42,773 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:42,773 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/jazhR4hC.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'pDFptqAkrkeohb15c8rRJw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153542Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=d9c62efff253abe2ef5d76c0b99464218148fd0e1667de06cb7ba412b685f862', 'amz-sdk-invocation-id': b'2c38d540-3d08-4c7e-a650-3ab123443d85', 'amz-sdk-request': b'attempt=1', 'Content-Length': '39381'}>
2024-05-06 18:35:42,773 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:42,773 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:42,939 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:43,097 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /jazhR4hC.jpg HTTP/1.1" 200 0
2024-05-06 18:35:43,097 - DEBUG - Response headers: {'x-amz-id-2': 'hHPAN12S12I97xeBat8Rzdk1C7toOSzpSpQSmIqlBl98BBDIeLIcskR8ZSAq8COVbrELV3Fk/Yrn2lmICraig/4oYAM8v7K2', 'x-amz-request-id': 'YZSX3KEHYRJ1XYJW', 'Date': 'Mon, 06 May 2024 15:35:43 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"a43169b6a024ae47a885bd7973cad127"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:43,097 - DEBUG - Response body:
b''
2024-05-06 18:35:43,097 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:43,097 - DEBUG - No retry needed.
2024-05-06 18:35:43,097 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:43,097 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:43,111 - INFO - https://ynet-pic1.yit.co.il/cdn-cgi/image/f=auto,w=740,q=75/picserver5/crop_images/2024/05/06/HyaD004Uz0/HyaD004Uz0_0_316_961_540_0_x-large.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/jazhR4hC.jpg
2024-05-06 18:35:43,283 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/jazhR4hC.jpg' WHERE id = 169
2024-05-06 18:35:43,361 - INFO - Updated article 169 with s3_image url: https://drwx9nycxbcad.cloudfront.net/jazhR4hC.jpg
2024-05-06 18:35:43,361 - INFO - Processing article with id: 170
2024-05-06 18:35:43,376 - DEBUG - Starting new HTTPS connection (1): img.mako.co.il:443
2024-05-06 18:35:44,117 - DEBUG - https://img.mako.co.il:443 "GET /2024/05/06/sportFive_1389514_C.jpg HTTP/1.1" 200 26796
2024-05-06 18:35:44,229 - DEBUG - Loading s3:Bucket
2024-05-06 18:35:44,237 - DEBUG - Renaming Bucket attribute name
2024-05-06 18:35:44,240 - DEBUG - Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x000002B7E66FFBA0>
2024-05-06 18:35:44,240 - DEBUG - Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
2024-05-06 18:35:44,240 - DEBUG - Using default client. pid: 107232, thread: 94452
2024-05-06 18:35:44,240 - DEBUG - Acquiring 0
2024-05-06 18:35:44,263 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17310>}) about to wait for the following futures []
2024-05-06 18:35:44,263 - DEBUG - UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17310>}) done waiting for dependent futures
2024-05-06 18:35:44,264 - DEBUG - Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17310>}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002B7E91938D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002B7E9178590>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB0B450>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002B7EFB17310>}
2024-05-06 18:35:44,265 - DEBUG - Submitting task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': '9XF3O_9s.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002B7EFB0B450> for transfer request: 0.
2024-05-06 18:35:44,265 - DEBUG - Acquiring 0
2024-05-06 18:35:44,269 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:44,269 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': '9XF3O_9s.jpg', 'extra_args': {}}) about to wait for the following futures []
2024-05-06 18:35:44,272 - DEBUG - PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': '9XF3O_9s.jpg', 'extra_args': {}}) done waiting for dependent futures
2024-05-06 18:35:44,272 - DEBUG - Executing task PutObjectTask(transfer_id=0, {'bucket': 'briefly-articles-images', 'key': '9XF3O_9s.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x000002B7E7EDB1D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB173D0>, 'bucket': 'briefly-articles-images', 'key': '9XF3O_9s.jpg', 'extra_args': {}}
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x000002B7E648D620>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x000002B7E648C900>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x000002B7E648E020>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x000002B7E648C860>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x000002B7E648EA20>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:44,272 - DEBUG - Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x000002B7E648C680>
2024-05-06 18:35:44,272 - DEBUG - Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x000002B7E648EC00>
2024-05-06 18:35:44,272 - DEBUG - Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:44,272 - DEBUG - Calling endpoint provider with parameters: {'Bucket': 'briefly-articles-images', 'Region': 'eu-north-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '9XF3O_9s.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
2024-05-06 18:35:44,272 - DEBUG - Endpoint provider result: https://briefly-articles-images.s3.eu-north-1.amazonaws.com
2024-05-06 18:35:44,272 - DEBUG - Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
2024-05-06 18:35:44,272 - DEBUG - Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
2024-05-06 18:35:44,272 - DEBUG - Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x000002B7E62922A0>
2024-05-06 18:35:44,285 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x000002B7E648CC20>
2024-05-06 18:35:44,285 - DEBUG - Adding expect 100 continue header to request.
2024-05-06 18:35:44,285 - DEBUG - Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:44,285 - DEBUG - Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x000002B7E6466F20>
2024-05-06 18:35:44,285 - DEBUG - Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x000002B7E648E160>
2024-05-06 18:35:44,285 - DEBUG - Making request for OperationModel(name=PutObject) with params: {'url_path': '/9XF3O_9s.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': 'z57bb7+BpAxtLHkNL6cKtA==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB173D0>, 'auth_path': '/briefly-articles-images/9XF3O_9s.jpg', 'url': 'https://briefly-articles-images.s3.eu-north-1.amazonaws.com/9XF3O_9s.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x000002B7E8107990>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'briefly-articles-images', 'params': {'Bucket': 'briefly-articles-images', 'Key': '9XF3O_9s.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x000002B7EFB173D0>}}, 'input_params': {'Bucket': 'briefly-articles-images', 'Key': '9XF3O_9s.jpg'}, 'signing': {'region': 'eu-north-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-north-1'}]}}}
2024-05-06 18:35:44,285 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x000002B7E7E5F740>
2024-05-06 18:35:44,285 - DEBUG - Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x000002B7E8107950>>
2024-05-06 18:35:44,285 - DEBUG - Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x000002B7E7C5CA10>>
2024-05-06 18:35:44,285 - DEBUG - Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x000002B7E648C540>
2024-05-06 18:35:44,285 - DEBUG - Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x000002B7E648EB60>
2024-05-06 18:35:44,285 - DEBUG - Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x000002B7E8136390>>
2024-05-06 18:35:44,285 - DEBUG - Calculating signature using v4 auth.
2024-05-06 18:35:44,285 - DEBUG - CanonicalRequest:
PUT
/9XF3O_9s.jpg

content-md5:z57bb7+BpAxtLHkNL6cKtA==
host:briefly-articles-images.s3.eu-north-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240506T153544Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
2024-05-06 18:35:44,285 - DEBUG - StringToSign:
AWS4-HMAC-SHA256
20240506T153544Z
20240506/eu-north-1/s3/aws4_request
d2c729bc00a2cd205f9bce2c171e9ef351e0def5cef3a5b03e92542ad982d3fa
2024-05-06 18:35:44,285 - DEBUG - Signature:
45e40d9e17a7872055d15ba86c16dc122daed8067d3c22ef5c330c6812c6fdc9
2024-05-06 18:35:44,285 - DEBUG - Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x000002B7E7E5F7E0>
2024-05-06 18:35:44,285 - DEBUG - Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x000002B7E648E980>
2024-05-06 18:35:44,285 - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://briefly-articles-images.s3.eu-north-1.amazonaws.com/9XF3O_9s.jpg, headers={'User-Agent': b'Boto3/1.34.98 md/Botocore#1.34.98 ua/2.0 os/windows#10 md/arch#amd64 lang/python#3.11.5 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.98 Resource', 'Content-MD5': b'z57bb7+BpAxtLHkNL6cKtA==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240506T153544Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIATIHNHPEDRGZIRO5L/20240506/eu-north-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=45e40d9e17a7872055d15ba86c16dc122daed8067d3c22ef5c330c6812c6fdc9', 'amz-sdk-invocation-id': b'18f9a716-efcf-49cc-9be1-99419533fe1f', 'amz-sdk-request': b'attempt=1', 'Content-Length': '26796'}>
2024-05-06 18:35:44,285 - DEBUG - Certificate path: c:\Users\dored\anaconda3\Lib\site-packages\certifi\cacert.pem
2024-05-06 18:35:44,285 - DEBUG - Waiting for 100 Continue response.
2024-05-06 18:35:44,429 - DEBUG - 100 Continue response seen, now sending request body.
2024-05-06 18:35:44,574 - DEBUG - https://briefly-articles-images.s3.eu-north-1.amazonaws.com:443 "PUT /9XF3O_9s.jpg HTTP/1.1" 200 0
2024-05-06 18:35:44,575 - DEBUG - Response headers: {'x-amz-id-2': '+K/lEiKu0dwbP6R7ECqUMJQCyggqvllpXwVwT5QbgAfTtHXDWPHT/r7RQP3Pjaf/1GMXFiBOd8QtKN1fNsdv4Vv4WPRRg6Bw', 'x-amz-request-id': 'GWVSTD0VNM5YGKT3', 'Date': 'Mon, 06 May 2024 15:35:45 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"cf9edb6fbf81a40c6d2c790d2fa70ab4"', 'Server': 'AmazonS3', 'Content-Length': '0'}
2024-05-06 18:35:44,575 - DEBUG - Response body:
b''
2024-05-06 18:35:44,575 - DEBUG - Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x000002B7E8135CD0>
2024-05-06 18:35:44,575 - DEBUG - No retry needed.
2024-05-06 18:35:44,575 - DEBUG - Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x000002B7E8134B90>>
2024-05-06 18:35:44,575 - DEBUG - Releasing acquire 0/None
2024-05-06 18:35:44,584 - INFO - https://img.mako.co.il/2024/05/06/sportFive_1389514_C.jpg uploaded to https://drwx9nycxbcad.cloudfront.net/9XF3O_9s.jpg
2024-05-06 18:35:44,759 - INFO - Executed query: UPDATE merged_articles SET s3_image = 'https://drwx9nycxbcad.cloudfront.net/9XF3O_9s.jpg' WHERE id = 170
2024-05-06 18:35:44,838 - INFO - Updated article 170 with s3_image url: https://drwx9nycxbcad.cloudfront.net/9XF3O_9s.jpg
2024-05-06 18:35:44,838 - INFO - Database connection closed
